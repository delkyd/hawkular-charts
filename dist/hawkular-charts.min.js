angular.module("hawkular.charts",[]);var Charts;!function(t){"use strict";function a(t,a,e){var n=d3.svg.line().interpolate("monotone").x(function(a){return t(a.timestamp)}).y(function(t){return a(e)});return n}function e(t,e,n){var r=t.svg.selectAll("path.alertLine").data([t.chartData]);r.attr("class",n).attr("d",a(t.timeScale,t.yScale,e)),r.enter().append("path").attr("class",n).attr("d",a(t.timeScale,t.yScale,e)),r.exit().remove()}function n(t,a){function e(t,a){var e,n=[];return t.forEach(function(r,i){0===i&&r.avg>a?n.push(i):(e=t[i-1],r.avg>a&&e&&(!e.avg||e.avg<=a)&&n.push(e.avg?i-1:i))}),n}function n(a,e){var n,r,o,s=[];return a.forEach(function(a){o=t[a];for(var c=a;c<t.length-1;c++)if(n=t[c],r=t[c+1],n.avg>e&&r.avg<=e||n.avg>e&&!r.avg){s.push(new i(o.timestamp,r.avg?r.timestamp:n.timestamp,e));break}}),s.length===a.length-1&&s.push(new i(t[a[a.length-1]].timestamp,t[t.length-1].timestamp,e)),s}var r,o;return o=e(t,a),r=n(o,a)}function r(t,a,e){function r(a){a.attr("class","alertBounds").attr("x",function(a){return t.timeScale(a.startTimestamp)}).attr("y",function(){return t.yScale(e)}).attr("height",function(a){return t.height-40}).attr("width",function(a){return t.timeScale(a.endTimestamp)-t.timeScale(a.startTimestamp)})}var i=n(t.chartData,a),o=t.svg.select("g.alertHolder").selectAll("rect.alertBounds").data(i);o.call(r),o.enter().append("rect").call(r),o.exit().remove()}var i=function(){function t(t,a,e){this.startTimestamp=t,this.endTimestamp=a,this.alertValue=e,this.startDate=new Date(t),this.endDate=new Date(a)}return t}();t.AlertBound=i,t.createAlertLine=e,t.createAlertBoundsArea=r}(Charts||(Charts={}));var Charts;!function(t){"use strict";var a=angular.module("hawkular.charts"),e=function(){function t(t){this.value=t}return t.prototype.toString=function(){return this.value},t.UP="up",t.DOWN="down",t.UNKNOWN="unknown",t}();t.AvailStatus=e;var n=function(){function t(t,a,e,n,r,i,o){this.start=t,this.end=a,this.value=e,this.startDate=n,this.endDate=r,this.duration=i,this.message=o,this.duration=moment(a).from(moment(t),!0),this.startDate=new Date(t),this.endDate=new Date(a)}return t}();t.TransformedAvailDataPoint=n;var r=function(){function a(r){var i=this;this.restrict="E",this.replace=!0,this.scope={data:"=",startTimestamp:"@",endTimestamp:"@",timeLabel:"@",dateLabel:"@",chartTitle:"@"},this.link=function(o,s,c){function l(t){return"<div class='chartHover'>\n            <div class='info-item'>\n              <span class='chartHoverLabel'>Status:</span>\n              <span class='chartHoverValue'>"+t.value.toUpperCase()+"</span>\n            </div>\n            <div class='info-item before-separator'>\n              <span class='chartHoverLabel'>Duration:</span>\n              <span class='chartHoverValue'>"+t.duration+"</span>\n            </div>\n          </div>"}function u(){E&&P.selectAll("*").remove(),P=d3.select(s[0]),E=P.append("svg").attr("viewBox","0 0 760 150").attr("preserveAspectRatio","xMinYMin meet"),H=d3.tip().attr("class","d3-tip").offset([-10,0]).html(function(t){return l(t)}),M=E.append("g").attr("width",R+_.left+_.right).attr("height",B).attr("transform","translate("+_.left+","+G+")"),M.append("defs").append("pattern").attr("id","diagonal-stripes").attr("patternUnits","userSpaceOnUse").attr("patternTransform","scale(0.7)").attr("width",4).attr("height",4).append("path").attr("d","M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2").attr("stroke","#B6B6B6").attr("stroke-width",1.2),M.call(H)}function m(a){var e=[];L=+c.startTimestamp||d3.min(a,function(t){return t.start})||+moment().subtract(1,"hour"),a&&a.length>0&&(e[0]=L,e[1]=b||+moment(),x=d3.scale.linear().clamp(!0).rangeRound([70,0]).domain([0,175]),A=d3.svg.axis().scale(x).ticks(0).tickSize(0,0).orient("left"),S=d3.time.scale().range([0,R]).domain(e),D=d3.svg.axis().scale(S).tickSize(-70,0).orient("top").tickFormat(t.xAxisTimeFormats()))}function d(t){return t.value===e.UP.toString()}function f(t){return t.value===e.UNKNOWN.toString()}function h(t){function a(t,a){return t.timestamp<a.timestamp?-1:t.timestamp>a.timestamp?1:0}var r=[],i=t.length;if(t.sort(a),t&&i>0&&t[0].timestamp){var o=(new Date).getTime();if(1===i){var s=t[0];r.push(new n(o-36e5,s.timestamp,e.UNKNOWN.toString())),r.push(new n(s.timestamp,o,s.value))}else for(var c=o,l=t.length;l>0;l--){if(L>=t[l-1].timestamp){r.push(new n(L,c,t[l-1].value));break}r.push(new n(t[l-1].timestamp,c,t[l-1].value)),c=t[l-1].timestamp}}return r}function p(){M.append("text").attr("class","availUpLabel").attr("x",-10).attr("y",25).style("font-family","Arial, Verdana, sans-serif;").style("font-size","12px").attr("fill","#999").style("text-anchor","end").text("Up"),M.append("text").attr("class","availDownLabel").attr("x",-10).attr("y",55).style("font-family","Arial, Verdana, sans-serif;").style("font-size","12px").attr("fill","#999").style("text-anchor","end").text("Down")}function v(t){function a(t){return I-o(0)+(d(t)||f(t)?0:35)}function e(t){return o(0)-(f(t)?15:50)}function n(t){return d(t)?"#54A24E":f(t)?"url(#diagonal-stripes)":"#D85054"}var r=d3.max(t,function(t){return+t.end}),i=d3.time.scale().range([0,R]).domain([L,b||r]),o=d3.scale.linear().clamp(!0).range([I,0]).domain([0,4]);M.selectAll("rect.availBars").data(t).enter().append("rect").attr("class","availBars").attr("x",function(t){return i(+t.start)}).attr("y",function(t){return a(t)}).attr("height",function(t){return e(t)}).attr("width",function(t){var a=b?Math.min(+t.end,b):+t.end;return i(a)-i(+t.start)}).attr("fill",function(t){return n(t)}).attr("opacity",function(){return.85}).on("mouseover",function(t,a){H.show(t,a)}).on("mouseout",function(){H.hide()}).on("mousedown",function(){var t=M.select(".brush").node(),a=new Event("mousedown");a.pageX=d3.event.pageX,a.clientX=d3.event.clientX,a.pageY=d3.event.pageY,a.clientY=d3.event.clientY,t.dispatchEvent(a)}).on("mouseup",function(){var t=M.select(".brush").node(),a=new Event("mouseup");a.pageX=d3.event.pageX,a.clientX=d3.event.clientX,a.pageY=d3.event.pageY,a.clientY=d3.event.clientY,t.dispatchEvent(a)}),M.append("line").attr("x1",0).attr("y1",70).attr("x2",655).attr("y2",70).attr("stroke-width",.5).attr("stroke","#D0D0D0"),p()}function g(){M.selectAll("g.axis").remove(),C=M.append("g").attr("class","x axis").call(D),M.append("g").attr("class","y axis").call(A)}function y(){function a(){M.classed("selecting",!0)}function e(){var a=w.extent(),e=Math.round(a[0].getTime()),n=Math.round(a[1].getTime()),i=n-e;i>=6e4&&r.$broadcast(t.EventNames.AVAIL_CHART_TIMERANGE_CHANGED.toString(),a),T.call(w.clear())}w=d3.svg.brush().x(S).on("brushstart",a).on("brushend",e),T=M.append("g").attr("class","brush").call(w),T.selectAll(".resize").append("path"),T.selectAll("rect").attr("height",70)}var x,S,A,D,C,w,T,H,E,P,M,L=+c.startTimestamp,b=+c.endTimestamp,k=a._CHART_HEIGHT,_={top:10,right:5,bottom:5,left:90},R=a._CHART_WIDTH-_.left-_.right,N=k-50,I=N-_.top-_.bottom,F=30,V=10,B=I+_.top-F-V,G=+F+V+_.top;o.$watchCollection("data",function(t){t&&(i.transformedDataPoints=h(angular.fromJson(t)),o.render(i.transformedDataPoints))}),o.$watchGroup(["startTimestamp","endTimestamp"],function(t){L=+t[0]||L,b=+t[1]||b,o.render(i.transformedDataPoints)}),o.render=function(t){t&&t.length>0&&(u(),m(t),g(),y(),v(t))}}}return a.Factory=function(){var t=function(t){return new a(t)};return t.$inject=["$rootScope"],t},a._CHART_HEIGHT=150,a._CHART_WIDTH=750,a}();t.AvailabilityChartDirective=r,a.directive("hkAvailabilityChart",r.Factory())}(Charts||(Charts={}));var Charts;!function(t){"use strict";var a=angular.module("hawkular.charts"),e=function(){function a(e){var n=this;this.restrict="E",this.replace=!0,this.scope={data:"=",showYAxisValues:"="},this.link=function(r,i,o){function s(){S&&A.selectAll("*").remove(),A=d3.select(i[0]);var t=i[0].parentNode;T=t.clientWidth,H=t.clientHeight,E=H-C.top-C.bottom-a._XAXIS_HEIGHT,P=H+C.top,S=A.append("svg").attr("width",T-C.left-C.right).attr("height",P),D=S.append("g").attr("transform","translate("+C.left+", 0)").attr("class","contextChart")}function c(a){p=d3.time.scale().range([0,T-10]).nice().domain([a[0].timestamp,a[a.length-1].timestamp]),v=d3.svg.axis().scale(p).tickSize(4,0).tickFormat(t.xAxisTimeFormats()).orient("bottom"),D.selectAll("g.axis").remove(),g=D.append("g").attr("class","x axis").attr("transform","translate(0,"+E+")").call(v);var e=d3.min(a,function(t){return t.avg}),n=d3.max(a,function(t){return t.avg});n+=.03*n,e-=.05*e,d=d3.scale.linear().rangeRound([E,0]).nice().domain([e,n]);var r=m?2:0;f=d3.svg.axis().scale(d).ticks(r).tickSize(4,0).orient("left"),h=D.append("g").attr("class","y axis").call(f);var i=d3.svg.area().interpolate("cardinal").defined(function(t){return!t.empty}).x(function(t){return p(t.timestamp)}).y0(function(t){return E}).y1(function(t){return d(t.avg)}),o=d3.svg.line().interpolate("cardinal").defined(function(t){return!t.empty}).x(function(t){return p(t.timestamp)}).y(function(t){return d(t.avg)}),s=D.selectAll("path.contextLine").data([a]);s.attr("class","contextLine").transition().attr("d",o),s.enter().append("path").attr("class","contextLine").transition().attr("d",o),s.exit().remove();var c=D.append("g").attr("class","context");c.append("path").datum(a).transition().duration(500).attr("class","contextArea").attr("d",i)}function l(){function a(){D.classed("selecting",!0)}function n(){var a=y.extent(),n=Math.round(a[0].getTime()),r=Math.round(a[1].getTime()),i=r-n;i>=6e4&&e.$broadcast(t.EventNames.CONTEXT_CHART_TIMERANGE_CHANGED.toString(),a)}y=d3.svg.brush().x(p).on("brushstart",a).on("brushend",n),g.append("g").selectAll("rect").attr("y",0).attr("height",H-10),x=D.append("g").attr("class","brush").call(y),x.selectAll(".resize").append("path"),x.selectAll("rect").attr("height",H+17)}function u(t){return t?t.map(function(t){var a=t.timestamp||t.start+(t.end-t.start)/2;return{timestamp:a,value:angular.isNumber(t.value)?t.value:void 0,avg:t.empty?void 0:t.avg,min:angular.isNumber(t.min)?t.min:void 0,max:angular.isNumber(t.max)?t.max:void 0,empty:t.empty}}):void 0}var m,d,f,h,p,v,g,y,x,S,A,D,C={top:0,right:5,bottom:5,left:90},w=a._CHART_HEIGHT_HINT,T=a._CHART_WIDTH_HINT-C.left-C.right,H=w-C.top-C.bottom,E=H-C.top-C.bottom-15,P=H+C.top;"undefined"!=typeof o.showYAxisValues&&(m="true"===o.showYAxisValues),r.$watchCollection("data",function(t){t&&(n.dataPoints=u(angular.fromJson(t)),r.render(n.dataPoints))}),r.render=function(t){t&&t.length>0&&(console.time("contextChartRender"),s(),c(t),l(),console.timeEnd("contextChartRender"))}}}return a.Factory=function(){var t=function(t){return new a(t)};return t.$inject=["$rootScope"],t},a._CHART_WIDTH_HINT=750,a._CHART_HEIGHT_HINT=50,a._XAXIS_HEIGHT=15,a}();t.ContextChartDirective=e,a.directive("hkContextChart",e.Factory())}(Charts||(Charts={}));var Charts;!function(t){"use strict";var a=function(){function t(t){this.value=t}return t.prototype.toString=function(){return this.value},t.CHART_TIMERANGE_CHANGED=new t("ChartTimeRangeChanged"),t.AVAIL_CHART_TIMERANGE_CHANGED=new t("AvailChartTimeRangeChanged"),t.TIMELINE_CHART_TIMERANGE_CHANGED=new t("TimelineChartTimeRangeChanged"),t.CONTEXT_CHART_TIMERANGE_CHANGED=new t("ContextChartTimeRangeChanged"),t.DATE_RANGE_DRAG_CHANGED=new t("DateRangeDragChanged"),t}();t.EventNames=a}(Charts||(Charts={}));var Charts;!function(t){"use strict";function a(t,a,e,n,r){var i=1,o=t.selectAll(".dataPointDot").data(r);o.attr("class","dataPointDot").attr("r",i).attr("cx",function(t){return a(t.timestamp)}).attr("cy",function(t){return t.avg?e(t.avg):-9999999}).on("mouseover",function(t,a){n.show(t,a)}).on("mouseout",function(){n.hide()}),o.enter().append("circle").attr("class","dataPointDot").attr("r",i).attr("cx",function(t){return a(t.timestamp)}).attr("cy",function(t){return t.avg?e(t.avg):-9999999}).on("mouseover",function(t,a){n.show(t,a)}).on("mouseout",function(){n.hide()}),o.exit().remove()}t.createDataPoints=a}(Charts||(Charts={}));var Charts;!function(t){"use strict";function a(t,a,e){var n=t||"monotone",r=d3.svg.line().interpolate(n).x(function(t){return a(t.timestamp)}).y(function(t){return e(t.value)});return r}function e(e,n){var r,i=e[e.length-1];if(r=i.min||i.max){var o=d3.svg.area().interpolate(n.interpolation).defined(function(a){return!t.isEmptyDataPoint(a)}).x(function(t){return n.timeScale(t.timestamp)}).y(function(t){return n.yScale(t.max)}).y0(function(t){return n.yScale(t.min)}),s=n.svg.selectAll("path.ConeArea").data([e]);s.attr("class","coneArea").attr("d",o),s.enter().append("path").attr("class","coneArea").attr("d",o),s.exit().remove()}var c=n.svg.selectAll(".forecastLine").data([e]);c.attr("class","forecastLine").attr("d",a("monotone",n.timeScale,n.yScale)),c.enter().append("path").attr("class","forecastLine").attr("d",a("monotone",n.timeScale,n.yScale)),c.exit().remove()}t.showForecastData=e}(Charts||(Charts={}));var Charts;!function(t){"use strict";var a=!1;t.DEFAULT_Y_SCALE=10,t.X_AXIS_HEIGHT=25,t.HOVER_DATE_TIME_FORMAT="MM/DD/YYYY h:mm a",t.margin={top:10,right:5,bottom:5,left:90},angular.module("hawkular.charts").directive("hkMetricChart",["$rootScope","$http","$window","$interval","$log",function(e,n,r,i,o){function s(r,s,c){function l(){B&&G.selectAll("*").remove(),G=d3.select(s[0]);var a=s[0].parentNode;return t.width=a.clientWidth,M=a.clientHeight,0===t.width?void console.error("Error setting up chart. Width is 0 on chart parent container."):0===M?void console.error("Error setting up chart. Height is 0 on chart parent container."):(L=M-t.margin.top-t.margin.bottom-t.X_AXIS_HEIGHT,St=M+t.margin.top,B=G.append("svg").attr("width",t.width+t.margin.left+t.margin.right).attr("height",St),$=B.append("g").attr("transform","translate("+t.margin.left+","+t.margin.top+")"),I=d3.tip().attr("class","d3-tip").offset([-10,0]).html(function(t,a){return g(t,a)}),$.call(I),void $.append("g").attr("class","alertHolder"))}function u(a){a&&(U=d3.max(a.map(function(a){return t.isEmptyDataPoint(a)?0:a.avg||a.value})),X=d3.min(a.map(function(a){return t.isEmptyDataPoint(a)?void 0:a.avg||a.value}))),Y=xt?0:.95*X,O=U+.2*(U-X),et&&(O=Math.max(O,1.2*et),Y=Math.min(Y,.95*et)),O=O||Y?O:t.DEFAULT_Y_SCALE}function m(){return d3.scale.linear().clamp(!0).rangeRound([L,0]).domain([Y,O])}function d(a){var e=t.determineXAxisTicksFromScreenWidth(t.width-t.margin.left-t.margin.right),n=t.determineYAxisTicksFromScreenHeight(L);if(a.length>0){b=a,u(a),k=m(),R=d3.svg.axis().scale(k).ticks(n).tickSize(4,4,0).orient("left");var r=d3.min(a.map(function(t){return t.timestamp})),i=void 0;i=P&&P.length>0?P[P.length-1].timestamp:d3.max(a.map(function(t){return t.timestamp})),_=d3.time.scale().range([0,t.width-t.margin.left-t.margin.right]).nice().domain([r,i]),N=d3.svg.axis().scale(_).ticks(e).tickFormat(t.xAxisTimeFormats()).tickSize(4,4,0).orient("bottom")}}function f(a){function e(){var e,n,r,i,o=[],s=[];return a.forEach(function(a){e=d3.max(a.values.map(function(a){return t.isEmptyDataPoint(a)?0:a.avg})),o.push(e),n=d3.min(a.values.map(function(a){return t.isEmptyDataPoint(a)?Number.MAX_VALUE:a.avg})),s.push(n)}),r=d3.max(o),i=d3.min(s),[i,r]}var n,r,i=e();return U=i[1],X=i[0],Y=xt?0:X-.05*X,et?(n=1.2*et,r=U+.2*(U-X),O=n>r?n:r):O=U+.2*(U-X),[Y,O||Y?O:t.DEFAULT_Y_SCALE]}function h(a){var e=t.determineXAxisTicksFromScreenWidth(t.width-t.margin.left-t.margin.right),n=t.determineXAxisTicksFromScreenWidth(L);if(a&&a[0]&&a[0].values){var r=f(a);Y=r[0],O=r[1],k=d3.scale.linear().clamp(!0).rangeRound([L,0]).domain([Y,O]),R=d3.svg.axis().scale(k).ticks(n).tickSize(4,4,0).orient("left"),_=d3.time.scale().range([0,t.width-t.margin.left-t.margin.right]).domain([d3.min(a,function(t){return d3.min(t.values,function(t){return t.timestamp})}),d3.max(a,function(t){return d3.max(t.values,function(t){return t.timestamp})})]),N=d3.svg.axis().scale(_).ticks(e).tickFormat(t.xAxisTimeFormats()).tickSize(4,4,0).orient("bottom")}}function p(t,a,e,i,s){void 0===s&&(s=60);var c={headers:{"Hawkular-Tenant":Z},params:{start:e,end:i,buckets:s}};if(e>=i&&o.log("Start date was after end date"),t&&Q&&a){var l=Q.split("-");n.get(t+"/"+l[0]+"s/"+a+"/"+(l[1]||"data"),c).success(function(t){W=v(t),r.render(W)}).error(function(t,a){o.error("Error Loading Chart Data:"+a+", "+t)})}}function v(t){return t?t.map(function(t){var a=t.timestamp||t.start+(t.end-t.start)/2;return{timestamp:a,date:new Date(a),value:angular.isNumber(t.value)?t.value:void 0,avg:t.empty?void 0:t.avg,min:angular.isNumber(t.min)?t.min:void 0,max:angular.isNumber(t.max)?t.max:void 0,empty:t.empty}}):void 0}function g(a,e){var n,r,i,o=a.timestamp,s=moment(a.timestamp).format(t.HOVER_DATE_TIME_FORMAT);return e>0&&(r=b[e-1].timestamp,i=moment(o).from(moment(r),!0)),n=t.isEmptyDataPoint(a)?"<div class='chartHover'>\n                <small class='chartHoverLabel'>"+ut+"</small>\n                <div><small><span class='chartHoverLabel'>"+mt+"</span><span>:\n                </span><span class='chartHoverValue'>"+i+"</span></small> </div>\n                <hr/>\n                <div><small><span class='chartHoverLabel'>"+pt+"</span><span>:\n                </span><span class='chartHoverValue'>"+s+"</span></small></div>\n                </div>":t.isRawMetric(a)?"<div class='chartHover'>\n                <div><small><span class='chartHoverLabel'>"+pt+"</span><span>: </span>\n                <span class='chartHoverValue'>"+s+"</span></small></div>\n                  <div><small><span class='chartHoverLabel'>"+mt+"</span><span>: </span>\n                  <span class='chartHoverValue'>"+i+"</span></small></div>\n                  <hr/>\n                  <div><small><span class='chartHoverLabel'>"+lt+"</span><span>: </span>\n                  <span class='chartHoverValue'>"+d3.round(a.value,2)+"</span></small> </div>\n                  </div> ":"<div class='chartHover'>\n                    <div class='info-item'>\n                      <span class='chartHoverLabel'>"+pt+":</span>\n                      <span class='chartHoverValue'>"+s+"</span>\n                    </div>\n                    <div class='info-item before-separator'>\n                      <span class='chartHoverLabel'>"+mt+":</span>\n                      <span class='chartHoverValue'>"+i+"</span>\n                    </div>\n                    <div class='info-item separator'>\n                      <span class='chartHoverLabel'>"+ft+":</span>\n                      <span class='chartHoverValue'>"+d3.round(a.max,2)+"</span>\n                    </div>\n                    <div class='info-item'>\n                      <span class='chartHoverLabel'>"+ht+":</span>\n                      <span class='chartHoverValue'>"+d3.round(a.avg,2)+"</span>\n                    </div>\n                    <div class='info-item'>\n                      <span class='chartHoverLabel'>"+dt+":</span>\n                      <span class='chartHoverValue'>"+d3.round(a.min,2)+"</span>\n                    </div>\n                  </div> "}function y(){var a=t.determineYAxisGridLineTicksFromScreenHeight(L);if(k=m()){var e=$.selectAll("g.grid.y_grid");e[0].length||(e=$.append("g").classed("grid y_grid",!0)),e.call(d3.svg.axis().scale(k).orient("left").ticks(a).tickSize(-t.width,0).tickFormat(""))}}function x(){function t(t){t.transition().delay(250).duration(750).attr("opacity",1)}if(R){$.selectAll("g.axis").remove();var a=($.append("g").attr("class","x axis").attr("transform","translate(0,"+L+")").attr("opacity",.3).call(N).call(t),$.append("g").attr("class","y axis").attr("opacity",.3).call(R).call(t),$.selectAll(".yAxisUnitsLabel"));L>=150&&c.yAxisUnits&&(a=$.append("text").attr("class","yAxisUnitsLabel").attr("transform","rotate(-90),translate(-20,-50)").attr("x",-L/2).style("text-anchor","center").text("NONE"===c.yAxisUnits?"":c.yAxisUnits).attr("opacity",.3).call(t))}}function S(a){var e=a||"monotone",n=d3.svg.line().interpolate(e).defined(function(a){return!t.isEmptyDataPoint(a)}).x(function(t){return _(t.timestamp)}).y(function(a){return k(t.isRawMetric(a)?a.value:a.avg)});return n}function A(){if("bar"===ct||"scatterline"===ct){var t=$.selectAll(".barAvgLine").data([b]);t.attr("class","barAvgLine").attr("d",S("monotone")),t.enter().append("path").attr("class","barAvgLine").attr("d",S("monotone")),t.exit().remove()}}function D(){function a(){$.classed("selecting",!0)}function n(){var a=F.extent(),n=Math.round(a[0].getTime()),r=Math.round(a[1].getTime()),i=r-n;if($.classed("selecting",!d3.event.target.empty()),i>=6e4){P=[];new t.ChartOptions($,_,k,b,E,L,M,I,O,yt,nt);e.$broadcast(t.EventNames.CHART_TIMERANGE_CHANGED.toString(),a)}V.call(F.clear())}V=$.selectAll("g.brush"),V.empty()&&(V=$.append("g").attr("class","brush")),F=d3.svg.brush().x(_).on("brushstart",a).on("brushend",n),V.call(F),V.selectAll(".resize").append("path"),V.selectAll("rect").attr("height",L)}function C(t){t&&$.append("path").datum(t).attr("class","prevRangeAvgLine").style("stroke-dasharray","9,3").attr("d",S("linear"))}function w(t){t&&$.selectAll(".annotationDot").data(t).enter().append("circle").attr("class","annotationDot").attr("r",5).attr("cx",function(t){return _(t.timestamp)}).attr("cy",function(){return M-k(O)}).style("fill",function(t){return"1"===t.severity?"red":"2"===t.severity?"yellow":"white"})}function T(){rt=Date.now(),it=moment().subtract(tt,"seconds").valueOf(),p(q,K,it,rt,60)}function H(t,a){At.forEach(function(e){e.name===t&&e.drawChart(a)})}var E,P,M,L,b,k,_,R,N,I,F,V,B,G,$,Y,O,U,X,W,z,j,J=[],q=c.metricUrl,K=c.metricId||"",Z=c.metricTenantId||"",Q=c.metricType||"gauge",tt=+c.timeRangeInSeconds||43200,at=+c.refreshIntervalInSeconds||3600,et=+c.alertValue,nt=c.interpolation||"monotone",rt=Date.now(),it=rt-tt,ot=[],st=[],ct=c.chartType||"line",lt=c.singleValueLabel||"Raw Value",ut=c.noDataLabel||"No Data",mt=c.durationLabel||"Interval",dt=c.minLabel||"Min",ft=c.maxLabel||"Max",ht=c.avgLabel||"Avg",pt=c.timestampLabel||"Timestamp",vt=!0,gt=!1,yt=!1,xt=!1,St=M+t.margin.top+t.margin.bottom;J=c.data,P=c.forecastData,gt=c.showDataPoints,ot=c.previousRangeData,st=c.annotationData;var At=[];At.push(new t.LineChart),At.push(new t.AreaChart),At.push(new t.ScatterChart),At.push(new t.ScatterLineChart),At.push(new t.HistogramChart),At.push(new t.RhqBarChart),At.push(new t.MultiLineChart),r.$watchCollection("data",function(t,a){(t||a)&&(W=angular.fromJson(t||[]),r.render(W))}),r.$watch("multiData",function(t,a){(t||a)&&(E=angular.fromJson(t||[]),r.render(W))},!0),r.$watch("previousRangeData",function(t){t&&(z=angular.fromJson(t),r.render(W))},!0),r.$watch("annotationData",function(t){t&&(st=angular.fromJson(t),r.render(W))},!0),r.$watch("forecastData",function(t){t&&(P=angular.fromJson(t),r.render(W))},!0),r.$watchGroup(["alertValue","chartType","hideHighLowValues","useZeroMinValue","showAvgLine"],function(t){et=t[0]||et,ct=t[1]||ct,yt="undefined"!=typeof t[2]?t[2]:yt,xt="undefined"!=typeof t[3]?t[3]:xt,vt="undefined"!=typeof t[4]?t[4]:vt,r.render(W)}),r.$watchGroup(["metricUrl","metricId","metricType","metricTenantId","timeRangeInSeconds"],function(t){q=t[0]||q,K=t[1]||K,Q=t[2]||K,Z=t[3]||Z,tt=t[4]||tt,T()}),r.$watch("refreshIntervalInSeconds",function(t){t&&(at=+t,i.cancel(j),j=i(function(){T()},1e3*at))}),r.$on("$destroy",function(){i.cancel(j)}),r.$on(t.EventNames.DATE_RANGE_DRAG_CHANGED,function(a,e){r.$emit(t.EventNames.CHART_TIMERANGE_CHANGED,e)}),r.$on(t.EventNames.CHART_TIMERANGE_CHANGED,function(t,a){c.forecastData=[],P=[],r.$digest()}),r.render=function(e){if(e||E){a&&(console.group("Render Chart"),console.time("chartRender")),l(),e?d(e):h(E);var n=new t.ChartOptions($,_,k,b,E,L,M,I,O,yt,nt);et&&et>Y&&O>et&&t.createAlertBoundsArea(n,et,O),D(),y(),H(ct,n),gt&&t.createDataPoints($,_,k,I,b),C(ot),x(),vt&&A(),et&&et>Y&&O>et&&t.createAlertLine(n,et,"alertLine"),st&&w(st),P&&P.length>0&&t.showForecastData(P,n),a&&(console.timeEnd("chartRender"),console.groupEnd("Render Chart"))}}}return{link:s,restrict:"E",replace:!0,scope:{data:"=",multiData:"=",forecastData:"=",metricUrl:"@",metricId:"@",metricType:"@",metricTenantId:"@",startTimestamp:"@",endTimestamp:"@",timeRangeInSeconds:"@",refreshIntervalInSeconds:"@",previousRangeData:"@",annotationData:"@",showDataPoints:"=",alertValue:"@",interpolation:"@",chartType:"@",yAxisUnits:"@",useZeroMinValue:"=",chartHoverDateFormat:"@",chartHoverTimeFormat:"@",singleValueLabel:"@",noDataLabel:"@",durationLabel:"@",minLabel:"@",maxLabel:"@",avgLabel:"@",timestampLabel:"@",showAvgLine:"=",hideHighLowValues:"="}}}])}(Charts||(Charts={}));var Charts;!function(t){"use strict";var a=function(){function t(t,a,e,n,r,i,o){this.timestamp=t,this.eventSource=a,this.provider=e,this.message=n,this.middlewareResource=r,this.formattedDate=i,this.color=o,this.formattedDate=moment(t).format("MMMM Do YYYY, h:mm:ss a")}return t}();t.TimelineDataPoint=a;var e=angular.module("hawkular.charts"),n=function(){function a(e){var n=this;this.restrict="E",this.replace=!0,this.scope={events:"=",startTimestamp:"@",endTimestamp:"@",timeLabel:"@",dateLabel:"@"},this.link=function(r,i,o){function s(t){return"<div class='chartHover'>\n            <div class='info-item'>\n              <span class='chartHoverLabel'>Event Source:</span>\n              <span class='chartHoverValue'>"+t.eventSource+"</span>\n            </div>\n            <div class='info-item'>\n              <span class='chartHoverLabel'>Provider:</span>\n              <span class='chartHoverValue'>"+t.provider+"</span>\n            </div>\n            <div class='info-item'>\n              <span class='chartHoverLabel'>Message:</span>\n              <span class='chartHoverValue'>"+t.message+"</span>\n            </div>\n            <div class='info-item'>\n              <span class='chartHoverLabel'>Middleware Resource:</span>\n              <span class='chartHoverValue'>"+t.middlewareResource+"</span>\n            </div>\n            <div class='info-item'>\n              <span class='chartHoverLabel'>Date Time:</span>\n              <span class='chartHoverValue'>"+moment(t.timestamp).format("M/d/YY, H:mm:ss ")+"</span>\n            </div>\n          </div>"}function c(){A&&D.selectAll("*").remove(),D=d3.select(i[0]),A=D.append("svg").attr("viewBox","0 0 760 150").attr("preserveAspectRatio","xMinYMin meet"),S=d3.tip().attr("class","d3-tip").offset([-10,0]).html(function(t){return s(t)}),C=A.append("g").attr("width",P+E.left+E.right).attr("height",_).attr("transform","translate("+E.left+","+R+")"),C.call(S)}function l(a){var e=[];w=+o.startTimestamp||d3.min(a,function(t){return t.timestamp})||+moment().subtract(1,"hour"),a&&a.length>0&&(e[0]=w,e[1]=T||+moment(),f=d3.scale.linear().clamp(!0).rangeRound([70,0]).domain([0,175]),p=d3.svg.axis().scale(f).ticks(0).tickSize(0,0).orient("left"),h=d3.time.scale().range([0,P]).domain(e),v=d3.svg.axis().scale(h).tickSize(-70,0).orient("top").tickFormat(t.xAxisTimeFormats()))}function u(t){var a=d3.min(t,function(t){return+t.timestamp}),e=d3.max(t,function(t){return+t.timestamp}),n=d3.time.scale().range([0,P]).domain([a,e]),r=d3.scale.linear().clamp(!0).range([L,0]).domain([0,6]);C.selectAll("circle").data(t).enter().append("circle").attr("class","hkEvent").attr("cx",function(t){return n(t.timestamp)}).attr("cy",function(t){return r(5)}).attr("r",function(t){return 6}).on("mouseover",function(t,a){S.show(t,a)}).on("mouseout",function(){S.hide()}),C.append("line").attr("x1",0).attr("y1",70).attr("x2",735).attr("y2",70).attr("stroke-width",1).attr("stroke","#D0D0D0")}function m(){C.selectAll("g.axis").remove(),g=C.append("g").attr("class","x axis").call(v),C.append("g").attr("class","y axis").call(p)}function d(){function a(){C.classed("selecting",!0)}function n(){var a=y.extent(),n=Math.round(a[0].getTime()),r=Math.round(a[1].getTime()),i=r-n;i>=6e4&&e.$broadcast(t.EventNames.TIMELINE_CHART_TIMERANGE_CHANGED.toString(),a),x.call(y.clear())}y=d3.svg.brush().x(h).on("brushstart",a).on("brushend",n),x=C.append("g").attr("class","brush").call(y),x.selectAll(".resize").append("path"),x.selectAll("rect").attr("height",70)}var f,h,p,v,g,y,x,S,A,D,C,w=+o.startTimestamp,T=+o.endTimestamp,H=a._CHART_HEIGHT,E={top:10,right:5,bottom:5,left:10},P=a._CHART_WIDTH-E.left-E.right,M=H-50,L=M-E.top-E.bottom,b=30,k=10,_=L+E.top-b-k,R=+b+k+E.top;r.$watchCollection("events",function(t){t&&(console.log("new timeline events"),n.events=angular.fromJson(t),r.render(n.events))}),r.$watchGroup(["startTimestamp","endTimestamp"],function(t){w=+t[0]||w,T=+t[1]||T,r.render(n.events)}),r.render=function(t){t&&t.length>0&&(c(),l(t),m(),d(),u(t))}}}return a.Factory=function(){var t=function(t){return new a(t)};return t.$inject=["$rootScope"],t},a._CHART_HEIGHT=150,a._CHART_WIDTH=750,a}();t.TimelineChartDirective=n,e.directive("hkTimelineChart",n.Factory())}(Charts||(Charts={}));var Charts;!function(t){"use strict";var a=function(){function t(t,a,e,n,r,i,o,s,c,l,u){this.svg=t,this.timeScale=a,this.yScale=e,this.chartData=n,this.multiChartData=r,this.modifiedInnerChartHeight=i,this.height=o,this.tip=s,this.visuallyAdjustedMax=c,this.hideHighLowValues=l,this.interpolation=u}return t}();t.ChartOptions=a}(Charts||(Charts={}));var Charts;!function(t){"use strict";function a(a,e,n){return void 0===n&&(n=t.BAR_OFFSET),a/e-n}function e(e,n){return 0===e||e===n-1?a(t.width,n,t.BAR_OFFSET)/2:a(t.width,n,t.BAR_OFFSET)}function n(e,n,r,i){return r(e.timestamp)-(0===n?0:a(t.width,i,t.BAR_OFFSET)/2)}function r(t){return t.empty}function i(t){return"undefined"==typeof t.avg}function o(){return d3.time.format.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%H:%M",function(t){return t.getMinutes()}],["%H:%M",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!==t.getDate()}],["%b %d",function(t){return 1!==t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",function(){return!0}]])}function s(t){var a=t.append("defs");a.append("pattern").attr("id","noDataStripes").attr("patternUnits","userSpaceOnUse").attr("x","0").attr("y","0").attr("width","6").attr("height","3").append("path").attr("d","M 0 0 6 0").attr("style","stroke:#CCCCCC; fill:none;"),a.append("pattern").attr("id","unknownStripes").attr("patternUnits","userSpaceOnUse").attr("x","0").attr("y","0").attr("width","6").attr("height","3").attr("style","stroke:#2E9EC2; fill:none;").append("path").attr("d","M 0 0 6 0"),a.append("pattern").attr("id","downStripes").attr("patternUnits","userSpaceOnUse").attr("x","0").attr("y","0").attr("width","6").attr("height","3").attr("style","stroke:#ff8a9a; fill:none;").append("path").attr("d","M 0 0 6 0")}function c(t,a){return a(t.timestamp)}function l(t){var a,e,n,r=0;if(0===t.length)return r;for(a=0,n=t.length;n>a;a++)e=t.charCodeAt(a),r=(r<<5)-r+e,r|=0;return r}function u(t){var a;return a=200>=t?2:350>=t&&t>200?4:9}function m(t){var a;return a=120>=t?3:9}function d(t){var a;return a=60>=t?0:10}t.calcBarWidth=a,t.calcBarWidthAdjusted=e,t.calcBarXPos=n,t.isEmptyDataPoint=r,t.isRawMetric=i,t.xAxisTimeFormats=o,t.createSvgDefs=s,t.xMidPointStartPosition=c,t.hashString=l,t.determineXAxisTicksFromScreenWidth=u,t.determineYAxisTicksFromScreenHeight=m,t.determineYAxisGridLineTicksFromScreenHeight=d}(Charts||(Charts={}));var Charts;!function(t){"use strict";t.BAR_OFFSET=2;var a=function(){function a(){this.name="histogram"}return a.prototype.drawChart=function(a,e){function n(n){n.attr("class",m).on("mouseover",function(t,e){a.tip.show(t,e)}).on("mouseout",function(){a.tip.hide()}).transition().attr("x",function(e,n){return t.calcBarXPos(e,n,a.timeScale,a.chartData.length)}).attr("width",function(e,n){return t.calcBarWidthAdjusted(n,a.chartData.length)}).attr("y",function(e){return t.isEmptyDataPoint(e)?0:a.yScale(e.avg)}).attr("height",function(e){return a.modifiedInnerChartHeight-a.yScale(t.isEmptyDataPoint(e)?a.yScale(a.visuallyAdjustedMax):e.avg)}).attr("opacity",e?".6":"1").attr("fill",function(a){return t.isEmptyDataPoint(a)?"url(#noDataStripes)":e?"#D3D3D6":"#C0C0C0"}).attr("stroke",function(t){return"#777"}).attr("stroke-width",function(t){return"0"}).attr("data-hawkular-value",function(t){
return t.avg})}function r(e){e.attr("class",function(t){return t.min===t.max?"singleValue":"high"}).attr("x",function(e,n){return t.calcBarXPos(e,n,a.timeScale,a.chartData.length)}).attr("y",function(t){return isNaN(t.max)?a.yScale(a.visuallyAdjustedMax):a.yScale(t.max)}).attr("height",function(e){return t.isEmptyDataPoint(e)?0:a.yScale(e.avg)-a.yScale(e.max)||2}).attr("width",function(e,n){return t.calcBarWidthAdjusted(n,a.chartData.length)}).attr("opacity",.9).on("mouseover",function(t,e){a.tip.show(t,e)}).on("mouseout",function(){a.tip.hide()})}function i(e){e.attr("class","low").attr("x",function(e,n){return t.calcBarXPos(e,n,a.timeScale,a.chartData.length)}).attr("y",function(t){return isNaN(t.avg)?a.height:a.yScale(t.avg)}).attr("height",function(e){return t.isEmptyDataPoint(e)?0:a.yScale(e.min)-a.yScale(e.avg)}).attr("width",function(e,n){return t.calcBarWidthAdjusted(n,a.chartData.length)}).attr("opacity",.9).on("mouseover",function(t,e){a.tip.show(t,e)}).on("mouseout",function(){a.tip.hide()})}function o(e){e.attr("class","histogramTopStem").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("x1",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("x2",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("y1",function(t){return a.yScale(t.max)}).attr("y2",function(t){return a.yScale(t.avg)}).attr("stroke",function(t){return"red"}).attr("stroke-opacity",function(t){return.6})}function s(e){e.filter(function(a){return!t.isEmptyDataPoint(a)}).attr("class","histogramBottomStem").attr("x1",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("x2",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("y1",function(t){return a.yScale(t.avg)}).attr("y2",function(t){return a.yScale(t.min)}).attr("stroke",function(t){return"red"}).attr("stroke-opacity",function(t){return.6})}function c(e){e.filter(function(a){return!t.isEmptyDataPoint(a)}).attr("class","histogramTopCross").attr("x1",function(e){return t.xMidPointStartPosition(e,a.timeScale)-3}).attr("x2",function(e){return t.xMidPointStartPosition(e,a.timeScale)+3}).attr("y1",function(t){return a.yScale(t.max)}).attr("y2",function(t){return a.yScale(t.max)}).attr("stroke",function(t){return"red"}).attr("stroke-width",function(t){return"0.5"}).attr("stroke-opacity",function(t){return.6})}function l(e){e.filter(function(a){return!t.isEmptyDataPoint(a)}).attr("class","histogramBottomCross").attr("x1",function(e){return t.xMidPointStartPosition(e,a.timeScale)-3}).attr("x2",function(e){return t.xMidPointStartPosition(e,a.timeScale)+3}).attr("y1",function(t){return a.yScale(t.min)}).attr("y2",function(t){return a.yScale(t.min)}).attr("stroke",function(t){return"red"}).attr("stroke-width",function(t){return"0.5"}).attr("stroke-opacity",function(t){return.6})}function u(t,e,n){if(n){var u=t.selectAll("rect.high, rect.singleValue").data(e);u.call(r),u.enter().append("rect").call(r),u.exit().remove();var m=t.selectAll("rect.low").data(a.chartData);m.call(i),m.enter().append("rect").call(i),m.exit().remove()}else{var d=t.selectAll(".histogramTopStem").data(a.chartData);d.call(o),d.enter().append("line").call(o),d.exit().remove();var f=t.selectAll(".histogramBottomStem").data(a.chartData);f.call(s),f.enter().append("line").call(s),f.exit().remove();var h=t.selectAll(".histogramTopCross").data(a.chartData);h.call(c),h.enter().append("line").call(c),h.exit().remove();var p=t.selectAll(".histogramBottomCross").data(a.chartData);p.call(l),p.enter().append("line").call(l),p.exit().remove()}}void 0===e&&(e=!1);var m=e?"leaderBar":"histogram",d=a.svg.selectAll("rect."+m).data(a.chartData);d.call(n),d.enter().append("rect").call(n),d.exit().remove(),a.hideHighLowValues?a.svg.selectAll(".histogramTopStem, .histogramBottomStem, .histogramTopCross, .histogramBottomCross").remove():u(a.svg,a.chartData,e)},a}();t.AbstractHistogramChart=a}(Charts||(Charts={}));var Charts;!function(t){"use strict";var a=function(){function a(){this.name="area"}return a.prototype.drawChart=function(a){var e=d3.svg.area().interpolate(a.interpolation).defined(function(a){return!t.isEmptyDataPoint(a)}).x(function(t){return a.timeScale(t.timestamp)}).y(function(e){return t.isRawMetric(e)?a.yScale(e.value):a.yScale(e.max)}).y0(function(e){return t.isRawMetric(e)?a.yScale(e.value):a.yScale(e.avg)}),n=d3.svg.area().interpolate(a.interpolation).defined(function(a){return!t.isEmptyDataPoint(a)}).x(function(t){return a.timeScale(t.timestamp)}).y(function(e){return t.isRawMetric(e)?a.yScale(e.value):a.yScale(e.avg)}).y0(function(t){return a.hideHighLowValues?a.height:a.yScale(t.min)}),r=d3.svg.area().interpolate(a.interpolation).defined(function(a){return!t.isEmptyDataPoint(a)}).x(function(t){return a.timeScale(t.timestamp)}).y(function(e){return t.isRawMetric(e)?a.yScale(e.value):a.yScale(e.min)}).y0(function(){return a.modifiedInnerChartHeight});if(!a.hideHighLowValues){var i=a.svg.selectAll("path.highArea").data([a.chartData]);i.attr("class","highArea").attr("d",e),i.enter().append("path").attr("class","highArea").attr("d",e),i.exit().remove();var o=a.svg.selectAll("path.lowArea").data([a.chartData]);o.attr("class","lowArea").attr("d",r),o.enter().append("path").attr("class","lowArea").attr("d",r),o.exit().remove()}var s=a.svg.selectAll("path.avgArea").data([a.chartData]);s.attr("class","avgArea").attr("d",n),s.enter().append("path").attr("class","avgArea").attr("d",n),s.exit().remove()},a}();t.AreaChart=a}(Charts||(Charts={}));var ChartOptions=Charts.ChartOptions,__extends=this&&this.__extends||function(t,a){function e(){this.constructor=t}for(var n in a)a.hasOwnProperty(n)&&(t[n]=a[n]);t.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)},Charts;!function(t){"use strict";var a=function(t){function a(){t.apply(this,arguments),this.name="histogram"}return __extends(a,t),a.prototype.drawChart=function(a,e){void 0===e&&(e=!1),t.prototype.drawChart.call(this,a,e)},a}(t.AbstractHistogramChart);t.HistogramChart=a}(Charts||(Charts={}));var Charts;!function(t){"use strict";var a=function(){function a(){this.name="line"}return a.prototype.drawChart=function(a){var e=d3.svg.line().interpolate(a.interpolation).defined(function(a){return!t.isEmptyDataPoint(a)}).x(function(t){return a.timeScale(t.timestamp)}).y(function(e){return t.isRawMetric(e)?a.yScale(e.value):a.yScale(e.avg)}),n=a.svg.selectAll("path.metricLine").data([a.chartData]);n.attr("class","metricLine").transition().attr("d",e),n.enter().append("path").attr("class","metricLine").transition().attr("d",e),n.exit().remove()},a}();t.LineChart=a}(Charts||(Charts={}));var Charts;!function(t){"use strict";var a=function(){function a(){this.name="multiline"}return a.prototype.drawChart=function(a){var e=this,n=d3.scale.category10(),r=0;a.multiChartData?(a.svg.selectAll("path[id^='multiLine']")[0].forEach(function(e){var n=!1;a.multiChartData.forEach(function(a){a.keyHash=a.keyHash||"multiLine"+t.hashString(a.key),e.getAttribute("id")===a.keyHash&&(n=!0)}),n||e.remove()}),a.multiChartData.forEach(function(i){if(i&&i.values){i.keyHash=i.keyHash||"multiLine"+t.hashString(i.key);var o=a.svg.selectAll("path#"+i.keyHash).data([i.values]);o.attr("id",i.keyHash).attr("class","multiLine").attr("fill","none").attr("stroke",function(){return i.color||n(r++)}).transition().attr("d",e.createLine("linear",a.timeScale,a.yScale)),o.enter().append("path").attr("id",i.keyHash).attr("class","multiLine").attr("fill","none").attr("stroke",function(){return i.color?i.color:n(r++)}).transition().attr("d",e.createLine("linear",a.timeScale,a.yScale)),o.exit().remove()}})):console.warn("No multi-data set for multiline chart")},a.prototype.createLine=function(a,e,n){var r=a||"monotone",i=d3.svg.line().interpolate(r).defined(function(a){return!t.isEmptyDataPoint(a)}).x(function(t){return e(t.timestamp)}).y(function(a){return n(t.isRawMetric(a)?a.value:a.avg)});return i},a}();t.MultiLineChart=a}(Charts||(Charts={}));var __extends=this&&this.__extends||function(t,a){function e(){this.constructor=t}for(var n in a)a.hasOwnProperty(n)&&(t[n]=a[n]);t.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)},Charts;!function(t){"use strict";var a=function(t){function a(){t.apply(this,arguments),this.name="rhqbar"}return __extends(a,t),a.prototype.drawChart=function(a,e){void 0===e&&(e=!0),t.prototype.drawChart.call(this,a,e)},a}(t.AbstractHistogramChart);t.RhqBarChart=a}(Charts||(Charts={}));var Charts;!function(t){"use strict";var a=function(){function a(){this.name="scatter"}return a.prototype.drawChart=function(a){if(a.hideHighLowValues)a.svg.selectAll(".highDot, .lowDot").remove();else{var e=a.svg.selectAll(".highDot").data(a.chartData);e.attr("class","highDot").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("r",3).attr("cx",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("cy",function(e){return t.isRawMetric(e)?a.yScale(e.value):a.yScale(e.max)}).style("fill",function(){return"#ff1a13"}).on("mouseover",function(t,a){}).on("mouseout",function(){}),e.enter().append("circle").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("class","highDot").attr("r",3).attr("cx",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("cy",function(e){return t.isRawMetric(e)?a.yScale(e.value):a.yScale(e.max)}).style("fill",function(){return"#ff1a13"}).on("mouseover",function(t,a){}).on("mouseout",function(){}),e.exit().remove();var n=a.svg.selectAll(".lowDot").data(a.chartData);n.attr("class","lowDot").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("r",3).attr("cx",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("cy",function(e){return t.isRawMetric(e)?a.yScale(e.value):a.yScale(e.min)}).style("fill",function(){return"#70c4e2"}).on("mouseover",function(t,a){}).on("mouseout",function(){}),n.enter().append("circle").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("class","lowDot").attr("r",3).attr("cx",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("cy",function(e){return t.isRawMetric(e)?a.yScale(e.value):a.yScale(e.min)}).style("fill",function(){return"#70c4e2"}).on("mouseover",function(t,a){}).on("mouseout",function(){}),n.exit().remove()}var r=a.svg.selectAll(".avgDot").data(a.chartData);r.attr("class","avgDot").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("r",3).attr("cx",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("cy",function(e){return t.isRawMetric(e)?a.yScale(e.value):a.yScale(e.avg)}).style("fill",function(){return"#FFF"}).on("mouseover",function(t,a){}).on("mouseout",function(){}),r.enter().append("circle").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("class","avgDot").attr("r",3).attr("cx",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("cy",function(e){return t.isRawMetric(e)?a.yScale(e.value):a.yScale(e.avg)}).style("fill",function(){return"#FFF"}).on("mouseover",function(t,a){}).on("mouseout",function(){}),r.exit().remove()},a}();t.ScatterChart=a}(Charts||(Charts={}));var Charts;!function(t){"use strict";var a=function(){function a(){this.name="scatterline"}return a.prototype.drawChart=function(a){var e=a.svg.selectAll(".scatterLineTopStem").data(a.chartData);e.attr("class","scatterLineTopStem").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("x1",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("x2",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("y1",function(t){return a.yScale(t.max)}).attr("y2",function(t){return a.yScale(t.avg)}).attr("stroke",function(t){return"#000"}),e.enter().append("line").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("class","scatterLineTopStem").attr("x1",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("x2",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("y1",function(t){return a.yScale(t.max)}).attr("y2",function(t){return a.yScale(t.avg)}).attr("stroke",function(t){return"#000"}),e.exit().remove();var n=a.svg.selectAll(".scatterLineBottomStem").data(a.chartData);n.attr("class","scatterLineBottomStem").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("x1",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("x2",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("y1",function(t){return a.yScale(t.avg)}).attr("y2",function(t){return a.yScale(t.min)}).attr("stroke",function(t){return"#000"}),n.enter().append("line").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("class","scatterLineBottomStem").attr("x1",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("x2",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("y1",function(t){return a.yScale(t.avg)}).attr("y2",function(t){return a.yScale(t.min)}).attr("stroke",function(t){return"#000"}),n.exit().remove();var r=a.svg.selectAll(".scatterLineTopCross").data(a.chartData);r.attr("class","scatterLineTopCross").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("x1",function(e){return t.xMidPointStartPosition(e,a.timeScale)-3}).attr("x2",function(e){return t.xMidPointStartPosition(e,a.timeScale)+3}).attr("y1",function(t){return a.yScale(t.max)}).attr("y2",function(t){return a.yScale(t.max)}).attr("stroke",function(t){return"#000"}).attr("stroke-width",function(t){return"0.5"}),r.enter().append("line").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("class","scatterLineTopCross").attr("x1",function(e){return t.xMidPointStartPosition(e,a.timeScale)-3}).attr("x2",function(e){return t.xMidPointStartPosition(e,a.timeScale)+3}).attr("y1",function(t){return a.yScale(t.max)}).attr("y2",function(t){return a.yScale(t.max)}).attr("stroke",function(t){return"#000"}).attr("stroke-width",function(t){return"0.5"}),r.exit().remove();var i=a.svg.selectAll(".scatterLineBottomCross").data(a.chartData);i.attr("class","scatterLineBottomCross").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("x1",function(e){return t.xMidPointStartPosition(e,a.timeScale)-3}).attr("x2",function(e){return t.xMidPointStartPosition(e,a.timeScale)+3}).attr("y1",function(t){return a.yScale(t.min)}).attr("y2",function(t){return a.yScale(t.min)}).attr("stroke",function(t){return"#000"}).attr("stroke-width",function(t){return"0.5"}),i.enter().append("line").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("class","scatterLineBottomCross").attr("x1",function(e){return t.xMidPointStartPosition(e,a.timeScale)-3}).attr("x2",function(e){return t.xMidPointStartPosition(e,a.timeScale)+3}).attr("y1",function(t){return a.yScale(t.min)}).attr("y2",function(t){return a.yScale(t.min)}).attr("stroke",function(t){return"#000"}).attr("stroke-width",function(t){return"0.5"}),i.exit().remove();var o=a.svg.selectAll(".scatterDot").data(a.chartData);o.attr("class","scatterDot").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("r",3).attr("cx",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("cy",function(e){return t.isRawMetric(e)?a.yScale(e.value):a.yScale(e.avg)}).style("fill",function(){return"#70c4e2"}).style("opacity",function(){return"1"}).on("mouseover",function(t,a){}).on("mouseout",function(){}),o.enter().append("circle").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("class","scatterDot").attr("r",3).attr("cx",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("cy",function(e){return t.isRawMetric(e)?a.yScale(e.value):a.yScale(e.avg)}).style("fill",function(){return"#70c4e2"}).style("opacity",function(){return"1"}).on("mouseover",function(t,a){}).on("mouseout",function(){}),o.exit().remove()},a}();t.ScatterLineChart=a}(Charts||(Charts={}));