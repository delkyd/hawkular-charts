angular.module("hawkular.charts",[]);var Charts;!function(t){"use strict";function a(t,a,e){var n=d3.svg.line().interpolate("monotone").x(function(a){return t(a.timestamp)}).y(function(t){return a(e)});return n}function e(t,e,n,r,i,o){var s=t.selectAll("path.alertLine").data([r]);s.attr("class",o).attr("d",a(e,n,i)),s.enter().append("path").attr("class",o).attr("d",a(e,n,i)),s.exit().remove()}function n(t,a){function e(t,a){var e,n=[];return t.forEach(function(r,i){0===i&&r.avg>a?n.push(i):(e=t[i-1],r.avg>a&&e&&(!e.avg||e.avg<=a)&&n.push(e.avg?i-1:i))}),n}function n(a,e){var n,r,o,s=[];return a.forEach(function(a){o=t[a];for(var c=a;c<t.length-1;c++)if(n=t[c],r=t[c+1],n.avg>e&&r.avg<=e||n.avg>e&&!r.avg){s.push(new i(o.timestamp,r.avg?r.timestamp:n.timestamp,e));break}}),s.length===a.length-1&&s.push(new i(t[a[a.length-1]].timestamp,t[t.length-1].timestamp,e)),s}var r,o;return o=e(t,a),r=n(o,a)}function r(t,a,e,n,r,i){function o(t){t.attr("class","alertBounds").attr("x",function(t){return a(t.startTimestamp)}).attr("y",function(){return e(r)}).attr("height",function(t){return n}).attr("width",function(t){return a(t.endTimestamp)-a(t.startTimestamp)})}var s=t.select("g.alertHolder").selectAll("rect.alertBounds").data(i);s.call(o),s.enter().append("rect").call(o),s.exit().remove()}var i=function(){function t(t,a,e){this.startTimestamp=t,this.endTimestamp=a,this.alertValue=e,this.startDate=new Date(t),this.endDate=new Date(a)}return t}();t.AlertBound=i,t.createAlertLine=e,t.extractAlertRanges=n,t.createAlertBoundsArea=r}(Charts||(Charts={}));var Charts;!function(t){"use strict";var a=angular.module("hawkular.charts"),e=function(){function t(t){this.value=t}return t.prototype.toString=function(){return this.value},t.UP="up",t.DOWN="down",t.UNKNOWN="unknown",t}();t.AvailStatus=e;var n=function(){function t(t,a,e,n,r,i,o){this.start=t,this.end=a,this.value=e,this.startDate=n,this.endDate=r,this.duration=i,this.message=o,this.duration=moment(a).from(moment(t),!0),this.startDate=new Date(t),this.endDate=new Date(a)}return t}();t.TransformedAvailDataPoint=n;var r=function(){function a(r){var i=this;this.restrict="E",this.replace=!0,this.scope={data:"=",startTimestamp:"@",endTimestamp:"@",timeLabel:"@",dateLabel:"@",chartTitle:"@"},this.link=function(o,s,c){function l(t){return"<div class='chartHover'>\n            <div class='info-item'>\n              <span class='chartHoverLabel'>Status:</span>\n              <span class='chartHoverValue'>"+t.value.toUpperCase()+"</span>\n            </div>\n            <div class='info-item before-separator'>\n              <span class='chartHoverLabel'>Duration:</span>\n              <span class='chartHoverValue'>"+t.duration+"</span>\n            </div>\n          </div>"}function u(){E&&H.selectAll("*").remove(),H=d3.select(s[0]),E=H.append("svg").attr("viewBox","0 0 760 150").attr("preserveAspectRatio","xMinYMin meet"),T=d3.tip().attr("class","d3-tip").offset([-10,0]).html(function(t){return l(t)}),k=E.append("g").attr("width",_+R.left+R.right).attr("height",B).attr("transform","translate("+R.left+","+U+")"),k.append("defs").append("pattern").attr("id","diagonal-stripes").attr("patternUnits","userSpaceOnUse").attr("patternTransform","scale(0.7)").attr("width",4).attr("height",4).append("path").attr("d","M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2").attr("stroke","#B6B6B6").attr("stroke-width",1.2),k.call(T)}function m(a){var e=[];b=+c.startTimestamp||d3.min(a,function(t){return t.start})||+moment().subtract(1,"hour"),a&&a.length>0&&(e[0]=b,e[1]=L||+moment(),x=d3.scale.linear().clamp(!0).rangeRound([70,0]).domain([0,175]),A=d3.svg.axis().scale(x).ticks(0).tickSize(0,0).orient("left"),S=d3.time.scale().range([0,_]).domain(e),D=d3.svg.axis().scale(S).tickSize(-70,0).orient("top").tickFormat(t.xAxisTimeFormats()))}function d(t){return t.value===e.UP.toString()}function f(t){return t.value===e.UNKNOWN.toString()}function h(t){function a(t,a){return t.timestamp<a.timestamp?-1:t.timestamp>a.timestamp?1:0}var r=[],i=t.length;if(t.sort(a),t&&i>0&&t[0].timestamp){var o=(new Date).getTime();if(1===i){var s=t[0];r.push(new n(o-36e5,s.timestamp,e.UNKNOWN.toString())),r.push(new n(s.timestamp,o,s.value))}else for(var c=o,l=t.length;l>0;l--){if(b>=t[l-1].timestamp){r.push(new n(b,c,t[l-1].value));break}r.push(new n(t[l-1].timestamp,c,t[l-1].value)),c=t[l-1].timestamp}}return r}function p(){k.append("text").attr("class","availUpLabel").attr("x",-10).attr("y",25).style("font-family","Arial, Verdana, sans-serif;").style("font-size","12px").attr("fill","#999").style("text-anchor","end").text("Up"),k.append("text").attr("class","availDownLabel").attr("x",-10).attr("y",55).style("font-family","Arial, Verdana, sans-serif;").style("font-size","12px").attr("fill","#999").style("text-anchor","end").text("Down")}function v(t){function a(t){return I-o(0)+(d(t)||f(t)?0:35)}function e(t){return o(0)-(f(t)?15:50)}function n(t){return d(t)?"#54A24E":f(t)?"url(#diagonal-stripes)":"#D85054"}var r=d3.max(t,function(t){return+t.end}),i=d3.time.scale().range([0,_]).domain([b,L||r]),o=d3.scale.linear().clamp(!0).range([I,0]).domain([0,4]);k.selectAll("rect.availBars").data(t).enter().append("rect").attr("class","availBars").attr("x",function(t){return i(+t.start)}).attr("y",function(t){return a(t)}).attr("height",function(t){return e(t)}).attr("width",function(t){var a=L?Math.min(+t.end,L):+t.end;return i(a)-i(+t.start)}).attr("fill",function(t){return n(t)}).attr("opacity",function(){return.85}).on("mouseover",function(t,a){T.show(t,a)}).on("mouseout",function(){T.hide()}).on("mousedown",function(){var t=k.select(".brush").node(),a=new Event("mousedown");a.pageX=d3.event.pageX,a.clientX=d3.event.clientX,a.pageY=d3.event.pageY,a.clientY=d3.event.clientY,t.dispatchEvent(a)}).on("mouseup",function(){var t=k.select(".brush").node(),a=new Event("mouseup");a.pageX=d3.event.pageX,a.clientX=d3.event.clientX,a.pageY=d3.event.pageY,a.clientY=d3.event.clientY,t.dispatchEvent(a)}),k.append("line").attr("x1",0).attr("y1",70).attr("x2",655).attr("y2",70).attr("stroke-width",.5).attr("stroke","#D0D0D0"),p()}function g(){k.selectAll("g.axis").remove(),w=k.append("g").attr("class","x axis").call(D),k.append("g").attr("class","y axis").call(A)}function y(){function a(){k.classed("selecting",!0)}function e(){var a=C.extent(),e=Math.round(a[0].getTime()),n=Math.round(a[1].getTime()),i=n-e;i>=6e4&&r.$broadcast(t.EventNames.AVAIL_CHART_TIMERANGE_CHANGED.toString(),a),P.call(C.clear())}C=d3.svg.brush().x(S).on("brushstart",a).on("brushend",e),P=k.append("g").attr("class","brush").call(C),P.selectAll(".resize").append("path"),P.selectAll("rect").attr("height",70)}var x,S,A,D,w,C,P,T,E,H,k,b=+c.startTimestamp,L=+c.endTimestamp,M=a._CHART_HEIGHT,R={top:10,right:5,bottom:5,left:90},_=a._CHART_WIDTH-R.left-R.right,N=M-50,I=N-R.top-R.bottom,F=30,V=10,B=I+R.top-F-V,U=+F+V+R.top;o.$watchCollection("data",function(t){t&&(i.transformedDataPoints=h(angular.fromJson(t)),o.render(i.transformedDataPoints))}),o.$watchGroup(["startTimestamp","endTimestamp"],function(t){b=+t[0]||b,L=+t[1]||L,o.render(i.transformedDataPoints)}),o.render=function(t){t&&t.length>0&&(u(),m(t),g(),y(),v(t))}}}return a.Factory=function(){var t=function(t){return new a(t)};return t.$inject=["$rootScope"],t},a._CHART_HEIGHT=150,a._CHART_WIDTH=750,a}();t.AvailabilityChartDirective=r,a.directive("availabilityChart",r.Factory())}(Charts||(Charts={}));var Charts;!function(t){"use strict";var a=angular.module("hawkular.charts"),e=function(){function a(e){var n=this;this.restrict="E",this.replace=!0,this.scope={data:"=",showYAxisValues:"="},this.link=function(r,i,o){function s(){S&&A.selectAll("*").remove(),A=d3.select(i[0]);var t=i[0].parentNode;P=t.clientWidth,T=t.clientHeight,E=T-w.top-w.bottom-a._XAXIS_HEIGHT,H=T+w.top,S=A.append("svg").attr("width",P-w.left-w.right).attr("height",H),D=S.append("g").attr("transform","translate("+w.left+", 0)").attr("class","contextChart")}function c(a){p=d3.time.scale().range([0,P-10]).nice().domain([a[0].timestamp,a[a.length-1].timestamp]),v=d3.svg.axis().scale(p).tickSize(4,0).tickFormat(t.xAxisTimeFormats()).orient("bottom"),D.selectAll("g.axis").remove(),g=D.append("g").attr("class","x axis").attr("transform","translate(0,"+E+")").call(v);var e=d3.min(a,function(t){return t.avg}),n=d3.max(a,function(t){return t.avg});n+=.03*n,e-=.05*e,d=d3.scale.linear().rangeRound([E,0]).nice().domain([e,n]);var r=m?2:0;f=d3.svg.axis().scale(d).ticks(r).tickSize(4,0).orient("left"),h=D.append("g").attr("class","y axis").call(f);var i=d3.svg.area().interpolate("cardinal").defined(function(t){return!t.empty}).x(function(t){return p(t.timestamp)}).y0(function(t){return E}).y1(function(t){return d(t.avg)}),o=d3.svg.line().interpolate("cardinal").defined(function(t){return!t.empty}).x(function(t){return p(t.timestamp)}).y(function(t){return d(t.avg)}),s=D.selectAll("path.contextLine").data([a]);s.attr("class","contextLine").transition().attr("d",o),s.enter().append("path").attr("class","contextLine").transition().attr("d",o),s.exit().remove();var c=D.append("g").attr("class","context");c.append("path").datum(a).transition().duration(500).attr("class","contextArea").attr("d",i)}function l(){function a(){D.classed("selecting",!0)}function n(){var a=y.extent(),n=Math.round(a[0].getTime()),r=Math.round(a[1].getTime()),i=r-n;i>=6e4&&e.$broadcast(t.EventNames.CONTEXT_CHART_TIMERANGE_CHANGED.toString(),a)}y=d3.svg.brush().x(p).on("brushstart",a).on("brushend",n),g.append("g").selectAll("rect").attr("y",0).attr("height",T-10),x=D.append("g").attr("class","brush").call(y),x.selectAll(".resize").append("path"),x.selectAll("rect").attr("height",T+17)}function u(t){return t?t.map(function(t){var a=t.timestamp||t.start+(t.end-t.start)/2;return{timestamp:a,value:angular.isNumber(t.value)?t.value:void 0,avg:t.empty?void 0:t.avg,min:angular.isNumber(t.min)?t.min:void 0,max:angular.isNumber(t.max)?t.max:void 0,empty:t.empty}}):void 0}var m,d,f,h,p,v,g,y,x,S,A,D,w={top:0,right:5,bottom:5,left:90},C=a._CHART_HEIGHT_HINT,P=a._CHART_WIDTH_HINT-w.left-w.right,T=C-w.top-w.bottom,E=T-w.top-w.bottom-15,H=T+w.top;"undefined"!=typeof o.showYAxisValues&&(m="true"===o.showYAxisValues),r.$watchCollection("data",function(t){t&&(n.dataPoints=u(angular.fromJson(t)),r.render(n.dataPoints))}),r.render=function(t){t&&t.length>0&&(console.time("contextChartRender"),s(),c(t),l(),console.timeEnd("contextChartRender"))}}}return a.Factory=function(){var t=function(t){return new a(t)};return t.$inject=["$rootScope"],t},a._CHART_WIDTH_HINT=750,a._CHART_HEIGHT_HINT=50,a._XAXIS_HEIGHT=15,a}();t.ContextChartDirective=e,a.directive("hawkularContextChart",e.Factory())}(Charts||(Charts={}));var Charts;!function(t){"use strict";var a=function(){function t(t){this.value=t}return t.prototype.toString=function(){return this.value},t.CHART_TIMERANGE_CHANGED=new t("ChartTimeRangeChanged"),t.AVAIL_CHART_TIMERANGE_CHANGED=new t("AvailChartTimeRangeChanged"),t.CONTEXT_CHART_TIMERANGE_CHANGED=new t("ContextChartTimeRangeChanged"),t}();t.EventNames=a}(Charts||(Charts={}));var Charts;!function(t){"use strict";function a(t,a,e,n,r){var i=1,o=t.selectAll(".dataPointDot").data(r);o.attr("class","dataPointDot").attr("r",i).attr("cx",function(t){return a(t.timestamp)}).attr("cy",function(t){return t.avg?e(t.avg):-9999999}).on("mouseover",function(t,a){n.show(t,a)}).on("mouseout",function(){n.hide()}),o.enter().append("circle").attr("class","dataPointDot").attr("r",i).attr("cx",function(t){return a(t.timestamp)}).attr("cy",function(t){return t.avg?e(t.avg):-9999999}).on("mouseover",function(t,a){n.show(t,a)}).on("mouseout",function(){n.hide()}),o.exit().remove()}t.createDataPoints=a}(Charts||(Charts={}));var Charts;!function(t){"use strict";var a=!1;t.DEFAULT_Y_SCALE=10,t.X_AXIS_HEIGHT=25,t.HOVER_DATE_TIME_FORMAT="MM/DD/YYYY h:mm a",t.margin={top:10,right:5,bottom:5,left:90};var e=function(){function t(t,a,e,n,r,i,o,s,c,l,u,m){this.svg=t,this.timeScale=a,this.yScale=e,this.chartData=n,this.multiChartData=r,this.modifiedInnerChartHeight=i,this.height=o,this.tip=s,this.visuallyAdjustedMax=c,this.hideHighLowValues=l,this.stacked=u,this.interpolation=m}return t}();t.ChartOptions=e,angular.module("hawkular.charts").directive("hawkularChart",["$rootScope","$http","$interval","$log",function(n,r,i,o){function s(s,c,l){function u(){Y&&O.selectAll("*").remove(),O=d3.select(c[0]);var a=c[0].parentNode;return t.width=a.clientWidth,_=a.clientHeight,0===t.width?void console.error("Error setting up chart. Width is 0 on chart parent container."):0===_?void console.error("Error setting up chart. Height is 0 on chart parent container."):(N=_-t.margin.top-t.margin.bottom-t.X_AXIS_HEIGHT,Pt=_+t.margin.top,Y=O.append("svg").attr("width",t.width+t.margin.left+t.margin.right).attr("height",Pt),W=Y.append("g").attr("transform","translate("+t.margin.left+","+t.margin.top+")"),G=d3.tip().attr("class","d3-tip").offset([-10,0]).html(function(t,a){return y(t,a)}),W.call(G),void W.append("g").attr("class","alertHolder"))}function m(a){a&&(J=d3.max(a.map(function(a){return t.isEmptyDataPoint(a)?0:a.avg||a.value})),q=d3.min(a.map(function(a){return t.isEmptyDataPoint(a)?void 0:a.avg||a.value}))),z=Ct?0:.95*q,j=J+.2*(J-q),st&&(j=Math.max(j,1.2*st),z=Math.min(z,.95*st)),j=j||z?j:t.DEFAULT_Y_SCALE}function d(){return d3.scale.linear().clamp(!0).rangeRound([N,0]).domain([z,j])}function f(a){var e=t.determineXAxisTicksFromScreenWidth(t.width-t.margin.left-t.margin.right),n=t.determineYAxisTicksFromScreenHeight(N);if(a.length>0){I=a,m(a),F=d(),B=d3.svg.axis().scale(F).ticks(n).tickSize(4,4,0).orient("left");var r,i=d3.min(a.map(function(t){return t.timestamp}));r=R&&R.length>0?R[R.length-1].timestamp:d3.max(a.map(function(t){return t.timestamp})),V=d3.time.scale().range([0,t.width-t.margin.left-t.margin.right]).nice().domain([i,r]),U=d3.svg.axis().scale(V).ticks(e).tickFormat(t.xAxisTimeFormats()).tickSize(4,4,0).orient("bottom")}}function h(a){function e(){var e,n,r,i,o=[],s=[];return a.forEach(function(a){e=d3.max(a.values.map(function(a){return t.isEmptyDataPoint(a)?0:a.avg})),o.push(e),n=d3.min(a.values.map(function(a){return t.isEmptyDataPoint(a)?Number.MAX_VALUE:a.avg})),s.push(n)}),r=d3.max(o),i=d3.min(s),[i,r]}var n,r,i=e();return J=i[1],q=i[0],z=Ct?0:q-.05*q,st?(n=1.2*st,r=J+.2*(J-q),j=n>r?n:r):j=J+.2*(J-q),[z,j||z?j:t.DEFAULT_Y_SCALE]}function p(a){var e=t.determineXAxisTicksFromScreenWidth(t.width-t.margin.left-t.margin.right),n=t.determineXAxisTicksFromScreenWidth(N);if(a&&a[0]&&a[0].values){var r=h(a);z=r[0],j=r[1],F=d3.scale.linear().clamp(!0).rangeRound([N,0]).domain([z,j]),B=d3.svg.axis().scale(F).ticks(n).tickSize(4,4,0).orient("left"),V=d3.time.scale().range([0,t.width-t.margin.left-t.margin.right]).domain([d3.min(a,function(t){return d3.min(t.values,function(t){return t.timestamp})}),d3.max(a,function(t){return d3.max(t.values,function(t){return t.timestamp})})]),U=d3.svg.axis().scale(V).ticks(e).tickFormat(t.xAxisTimeFormats()).tickSize(4,4,0).orient("bottom")}}function v(t,a,e,n,i){void 0===i&&(i=60);var c={headers:{"Hawkular-Tenant":nt},params:{start:e,end:n,buckets:i}};if(e>=n&&o.log("Start date was after end date"),t&&rt&&a){var l=rt.split("-");r.get(t+"/"+l[0]+"s/"+a+"/"+(l[1]||"data"),c).success(function(t){K=g(t),s.render(K,Z)}).error(function(t,a){o.error("Error Loading Chart Data:"+a+", "+t)})}}function g(t){return t?t.map(function(t){var a=t.timestamp||t.start+(t.end-t.start)/2;return{timestamp:a,date:new Date(a),value:angular.isNumber(t.value)?t.value:void 0,avg:t.empty?void 0:t.avg,min:angular.isNumber(t.min)?t.min:void 0,max:angular.isNumber(t.max)?t.max:void 0,empty:t.empty}}):void 0}function y(a,e){var n,r,i,o=a.timestamp,s=moment(a.timestamp).format(t.HOVER_DATE_TIME_FORMAT);return e>0&&(r=I[e-1].timestamp,i=moment(o).from(moment(r),!0)),n=t.isEmptyDataPoint(a)?"<div class='chartHover'>\n                <small class='chartHoverLabel'>"+pt+"</small>\n                <div><small><span class='chartHoverLabel'>"+vt+"</span><span>:\n                </span><span class='chartHoverValue'>"+i+"</span></small> </div>\n                <hr/>\n                <div><small><span class='chartHoverLabel'>"+St+"</span><span>:\n                </span><span class='chartHoverValue'>"+s+"</span></small></div>\n                </div>":t.isRawMetric(a)?"<div class='chartHover'>\n                <div><small><span class='chartHoverLabel'>"+St+"</span><span>: </span>\n                <span class='chartHoverValue'>"+s+"</span></small></div>\n                  <div><small><span class='chartHoverLabel'>"+vt+"</span><span>: </span>\n                  <span class='chartHoverValue'>"+i+"</span></small></div>\n                  <hr/>\n                  <div><small><span class='chartHoverLabel'>"+ht+"</span><span>: </span>\n                  <span class='chartHoverValue'>"+d3.round(a.value,2)+"</span></small> </div>\n                  </div> ":"<div class='chartHover'>\n                    <div class='info-item'>\n                      <span class='chartHoverLabel'>"+St+":</span>\n                      <span class='chartHoverValue'>"+s+"</span>\n                    </div>\n                    <div class='info-item before-separator'>\n                      <span class='chartHoverLabel'>"+vt+":</span>\n                      <span class='chartHoverValue'>"+i+"</span>\n                    </div>\n                    <div class='info-item separator'>\n                      <span class='chartHoverLabel'>"+yt+":</span>\n                      <span class='chartHoverValue'>"+d3.round(a.max,2)+"</span>\n                    </div>\n                    <div class='info-item'>\n                      <span class='chartHoverLabel'>"+xt+":</span>\n                      <span class='chartHoverValue'>"+d3.round(a.avg,2)+"</span>\n                    </div>\n                    <div class='info-item'>\n                      <span class='chartHoverLabel'>"+gt+":</span>\n                      <span class='chartHoverValue'>"+d3.round(a.min,2)+"</span>\n                    </div>\n                  </div> "}function x(a){var e=d3.scale.category10(),n=0;a.multiChartData?(W.selectAll("path[id^='multiLine']")[0].forEach(function(a){var e=!1;M.forEach(function(n){n.keyHash=n.keyHash||"multiLine"+t.hashString(n.key),a.getAttribute("id")===n.keyHash&&(e=!0)}),e||a.remove()}),M.forEach(function(a){if(a&&a.values){a.keyHash=a.keyHash||"multiLine"+t.hashString(a.key);var r=W.selectAll("path#"+a.keyHash).data([a.values]);r.attr("id",a.keyHash).attr("class","multiLine").attr("fill","none").attr("stroke",function(){return a.color||e(n++)}).transition().attr("d",w("linear")),r.enter().append("path").attr("id",a.keyHash).attr("class","multiLine").attr("fill","none").attr("stroke",function(){return a.color?a.color:e(n++)}).transition().attr("d",w("linear")),r.exit().remove()}})):o.warn("No multi-data set for multiline chart")}function S(){var a=t.determineYAxisGridLineTicksFromScreenHeight(N);if(F=d()){var e=W.selectAll("g.grid.y_grid");e[0].length||(e=W.append("g").classed("grid y_grid",!0)),e.call(d3.svg.axis().scale(F).orient("left").ticks(a).tickSize(-t.width,0).tickFormat(""))}}function A(){function t(t){t.transition().delay(250).duration(750).attr("opacity",1)}if(B){W.selectAll("g.axis").remove();var a=(W.append("g").attr("class","x axis").attr("transform","translate(0,"+N+")").attr("opacity",.3).call(U).call(t),W.append("g").attr("class","y axis").attr("opacity",.3).call(B).call(t),W.selectAll(".yAxisUnitsLabel"));N>=150&&l.yAxisUnits&&(a=W.append("text").attr("class","yAxisUnitsLabel").attr("transform","rotate(-90),translate(-20,-50)").attr("x",-N/2).style("text-anchor","center").text("NONE"===l.yAxisUnits?"":l.yAxisUnits).attr("opacity",.3).call(t))}}function D(a){var e=a||"monotone",n=d3.svg.line().interpolate(e).defined(function(a){return!t.isEmptyDataPoint(a)}).x(function(t){return V(t.timestamp)}).y(function(a){return F(t.isRawMetric(a)?a.value:a.avg)});return n}function w(a){var e=a||"monotone",n=d3.svg.line().interpolate(e).defined(function(a){return!t.isEmptyDataPoint(a)}).x(function(t){return V(t.timestamp)}).y(function(a){return F(t.isRawMetric(a)?a.value:a.avg)});return n}function C(){if("bar"===ft||"scatterline"===ft){var t=W.selectAll(".barAvgLine").data([I]);t.attr("class","barAvgLine").attr("d",D("monotone")),t.enter().append("path").attr("class","barAvgLine").attr("d",D("monotone")),t.exit().remove()}}function P(){function a(){W.classed("selecting",!0)}function e(){var a=X.extent(),e=Math.round(a[0].getTime()),r=Math.round(a[1].getTime()),i=r-e;W.classed("selecting",!d3.event.target.empty()),i>=6e4&&(R=[],k(R),n.$broadcast(t.EventNames.CHART_TIMERANGE_CHANGED.toString(),a)),$.call(X.clear())}$=W.selectAll("g.brush"),$.empty()&&($=W.append("g").attr("class","brush")),X=d3.svg.brush().x(V).on("brushstart",a).on("brushend",e),$.call(X),$.selectAll(".resize").append("path"),$.selectAll("rect").attr("height",N)}function T(t){t&&W.append("path").datum(t).attr("class","prevRangeAvgLine").style("stroke-dasharray","9,3").attr("d",D("linear"))}function E(t){t&&W.selectAll(".annotationDot").data(t).enter().append("circle").attr("class","annotationDot").attr("r",5).attr("cx",function(t){return V(t.timestamp)}).attr("cy",function(){return _-F(j)}).style("fill",function(t){return"1"===t.severity?"red":"2"===t.severity?"yellow":"white"})}function H(t){var a=t||"monotone",e=d3.svg.line().interpolate(a).x(function(t){return V(t.timestamp)}).y(function(t){return F(t.value)});return e}function k(t){var a=W.selectAll(".forecastLine").data([t]);a.attr("class","forecastLine").attr("d",H("monotone")),a.enter().append("path").attr("class","forecastLine").attr("d",H("monotone")),a.exit().remove()}function b(){lt=Date.now(),ut=moment().subtract(it,"seconds").valueOf(),v(at,et,ut,lt,60)}function L(a){var n="rhqbar"===a,r=new e(W,V,F,I,M,N,_,G,j,wt,n,ct);switch(a){case"rhqbar":t.createHistogramChart(r);break;case"histogram":t.createHistogramChart(r);break;case"line":t.createLineChart(r);break;case"hawkularmetric":o.info("DEPRECATION WARNING: The chart type hawkularmetric has been deprecated and will be removed in a future release. Please use the line chart type in its place"),t.createLineChart(r);break;case"multiline":x(r);break;case"area":t.createAreaChart(r);break;case"scatter":t.createScatterChart(r);break;case"scatterline":t.createScatterLineChart(r);break;default:o.warn("chart-type is not valid. Must be in [rhqbar,line,area,multiline,scatter,scatterline,histogram] chart type: "+a)}}var M,R,_,N,I,F,V,B,U,G,X,$,Y,O,W,z,j,J,q,K,Z,Q,tt=[],at=l.metricUrl,et=l.metricId||"",nt=l.metricTenantId||"",rt=l.metricType||"gauge",it=+l.timeRangeInSeconds||43200,ot=+l.refreshIntervalInSeconds||3600,st=+l.alertValue,ct=l.interpolation||"monotone",lt=Date.now(),ut=lt-it,mt=[],dt=[],ft=l.chartType||"line",ht=l.singleValueLabel||"Raw Value",pt=l.noDataLabel||"No Data",vt=l.durationLabel||"Interval",gt=l.minLabel||"Min",yt=l.maxLabel||"Max",xt=l.avgLabel||"Avg",St=l.timestampLabel||"Timestamp",At=!0,Dt=!1,wt=!1,Ct=!1,Pt=_+t.margin.top+t.margin.bottom;tt=l.data,R=l.forecastData,Dt=l.showDataPoints,mt=l.previousRangeData,dt=l.annotationData,s.$watchCollection("data",function(t,a){(t||a)&&(K=angular.fromJson(t||[]),s.render(K,Z))}),s.$watch("multiData",function(t,a){(t||a)&&(M=angular.fromJson(t||[]),s.render(K,Z))},!0),s.$watch("previousRangeData",function(t){t&&(Z=angular.fromJson(t),s.render(K,Z))},!0),s.$watch("annotationData",function(t){t&&(dt=angular.fromJson(t),s.render(K,Z))},!0),s.$watch("forecastData",function(t){t&&(R=angular.fromJson(t),s.render(K,Z))},!0),s.$watchGroup(["alertValue","chartType","hideHighLowValues","useZeroMinValue","showAvgLine"],function(t){st=t[0]||st,ft=t[1]||ft,wt="undefined"!=typeof t[2]?t[2]:wt,Ct="undefined"!=typeof t[3]?t[3]:Ct,At="undefined"!=typeof t[4]?t[4]:At,s.render(K,Z)}),s.$watchGroup(["metricUrl","metricId","metricType","metricTenantId","timeRangeInSeconds"],function(t){at=t[0]||at,et=t[1]||et,rt=t[2]||et,nt=t[3]||nt,it=t[4]||it,b()}),s.$watch("refreshIntervalInSeconds",function(t){t&&(ot=+t,i.cancel(Q),Q=i(function(){b()},1e3*ot))}),s.$on("$destroy",function(){i.cancel(Q)}),s.$on("DateRangeDragChanged",function(t,a){s.$emit("GraphTimeRangeChangedEvent",a)}),s.render=function(e,n){if(e||M){if(a&&(console.group("Render Chart"),console.time("chartRender")),u(),e&&f(e),M&&p(M),st&&st>z&&j>st){var r=t.extractAlertRanges(I,st);t.createAlertBoundsArea(W,V,F,N,j,r)}P(),S(),L(ft),Dt&&t.createDataPoints(W,V,F,G,I),T(n),A(),At&&C(),st&&st>z&&j>st&&t.createAlertLine(W,V,F,I,st,"alertLine"),dt&&E(dt),R&&R.length>0&&k(R),a&&(console.timeEnd("chartRender"),console.groupEnd("Render Chart"))}}}return{link:s,restrict:"E",replace:!0,scope:{data:"=",multiData:"=",forecastData:"=",metricUrl:"@",metricId:"@",metricType:"@",metricTenantId:"@",startTimestamp:"@",endTimestamp:"@",timeRangeInSeconds:"@",refreshIntervalInSeconds:"@",previousRangeData:"@",annotationData:"@",showDataPoints:"=",alertValue:"@",interpolation:"@",chartType:"@",yAxisUnits:"@",useZeroMinValue:"=",chartHoverDateFormat:"@",chartHoverTimeFormat:"@",singleValueLabel:"@",noDataLabel:"@",durationLabel:"@",minLabel:"@",maxLabel:"@",avgLabel:"@",timestampLabel:"@",showAvgLine:"=",hideHighLowValues:"="}}}])}(Charts||(Charts={}));var Charts;!function(t){"use strict"}(Charts||(Charts={}));var Charts;!function(t){"use strict";function a(a,e,n){return void 0===n&&(n=t.BAR_OFFSET),a/e-n}function e(e,n){return 0===e||e===n-1?a(t.width,n,t.BAR_OFFSET)/2:a(t.width,n,t.BAR_OFFSET)}function n(e,n,r,i){return r(e.timestamp)-(0===n?0:a(t.width,i,t.BAR_OFFSET)/2)}function r(t){return t.empty}function i(t){return"undefined"==typeof t.avg}function o(){return d3.time.format.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%H:%M",function(t){return t.getMinutes()}],["%H:%M",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!==t.getDate()}],["%b %d",function(t){return 1!==t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",function(){return!0}]])}function s(t){var a=t.append("defs");a.append("pattern").attr("id","noDataStripes").attr("patternUnits","userSpaceOnUse").attr("x","0").attr("y","0").attr("width","6").attr("height","3").append("path").attr("d","M 0 0 6 0").attr("style","stroke:#CCCCCC; fill:none;"),a.append("pattern").attr("id","unknownStripes").attr("patternUnits","userSpaceOnUse").attr("x","0").attr("y","0").attr("width","6").attr("height","3").attr("style","stroke:#2E9EC2; fill:none;").append("path").attr("d","M 0 0 6 0"),a.append("pattern").attr("id","downStripes").attr("patternUnits","userSpaceOnUse").attr("x","0").attr("y","0").attr("width","6").attr("height","3").attr("style","stroke:#ff8a9a; fill:none;").append("path").attr("d","M 0 0 6 0")}function c(t,a){return a(t.timestamp)}function l(t){var a,e,n,r=0;if(0===t.length)return r;for(a=0,n=t.length;n>a;a++)e=t.charCodeAt(a),r=(r<<5)-r+e,r|=0;return r}function u(t){var a;return a=200>=t?2:350>=t&&t>200?4:9}function m(t){var a;return a=120>=t?3:9}function d(t){var a;return a=60>=t?0:10}t.calcBarWidth=a,t.calcBarWidthAdjusted=e,t.calcBarXPos=n,t.isEmptyDataPoint=r,t.isRawMetric=i,t.xAxisTimeFormats=o,t.createSvgDefs=s,t.xMidPointStartPosition=c,t.hashString=l,t.determineXAxisTicksFromScreenWidth=u,t.determineYAxisTicksFromScreenHeight=m,t.determineYAxisGridLineTicksFromScreenHeight=d}(Charts||(Charts={}));var Charts;!function(t){"use strict";function a(a){var e=d3.svg.area().interpolate(a.interpolation).defined(function(a){return!t.isEmptyDataPoint(a)}).x(function(t){return a.timeScale(t.timestamp)}).y(function(e){return t.isRawMetric(e)?a.yScale(e.value):a.yScale(e.max)}).y0(function(e){return t.isRawMetric(e)?a.yScale(e.value):a.yScale(e.avg)}),n=d3.svg.area().interpolate(a.interpolation).defined(function(a){return!t.isEmptyDataPoint(a)}).x(function(t){return a.timeScale(t.timestamp)}).y(function(e){return t.isRawMetric(e)?a.yScale(e.value):a.yScale(e.avg)}).y0(function(t){return a.hideHighLowValues?a.height:a.yScale(t.min)}),r=d3.svg.area().interpolate(a.interpolation).defined(function(a){return!t.isEmptyDataPoint(a)}).x(function(t){return a.timeScale(t.timestamp)}).y(function(e){return t.isRawMetric(e)?a.yScale(e.value):a.yScale(e.min)}).y0(function(){return a.modifiedInnerChartHeight});if(!a.hideHighLowValues){var i=a.svg.selectAll("path.highArea").data([a.chartData]);i.attr("class","highArea").attr("d",e),i.enter().append("path").attr("class","highArea").attr("d",e),i.exit().remove();var o=a.svg.selectAll("path.lowArea").data([a.chartData]);o.attr("class","lowArea").attr("d",r),o.enter().append("path").attr("class","lowArea").attr("d",r),o.exit().remove()}var s=a.svg.selectAll("path.avgArea").data([a.chartData]);s.attr("class","avgArea").attr("d",n),s.enter().append("path").attr("class","avgArea").attr("d",n),s.exit().remove()}t.createAreaChart=a}(Charts||(Charts={}));var Charts;!function(t){"use strict";function a(a){function e(e){e.attr("class",u).on("mouseover",function(t,e){a.tip.show(t,e)}).on("mouseout",function(){a.tip.hide()}).transition().attr("x",function(e,n){return t.calcBarXPos(e,n,a.timeScale,a.chartData.length)}).attr("width",function(e,n){return t.calcBarWidthAdjusted(n,a.chartData.length)}).attr("y",function(e){return t.isEmptyDataPoint(e)?0:a.yScale(e.avg)}).attr("height",function(e){return a.modifiedInnerChartHeight-a.yScale(t.isEmptyDataPoint(e)?a.yScale(a.visuallyAdjustedMax):e.avg)}).attr("opacity",a.stacked?".6":"1").attr("fill",function(e){return t.isEmptyDataPoint(e)?"url(#noDataStripes)":a.stacked?"#D3D3D6":"#C0C0C0"}).attr("stroke",function(t){return"#777"}).attr("stroke-width",function(t){return"0"}).attr("data-hawkular-value",function(t){return t.avg})}function n(e){e.attr("class",function(t){return t.min===t.max?"singleValue":"high"}).attr("x",function(e,n){return t.calcBarXPos(e,n,a.timeScale,a.chartData.length)}).attr("y",function(t){return isNaN(t.max)?a.yScale(a.visuallyAdjustedMax):a.yScale(t.max)}).attr("height",function(e){return t.isEmptyDataPoint(e)?0:a.yScale(e.avg)-a.yScale(e.max)||2}).attr("width",function(e,n){return t.calcBarWidthAdjusted(n,a.chartData.length)}).attr("opacity",.9).on("mouseover",function(t,e){a.tip.show(t,e)}).on("mouseout",function(){a.tip.hide()})}function r(e){e.attr("class","low").attr("x",function(e,n){return t.calcBarXPos(e,n,a.timeScale,a.chartData.length)}).attr("y",function(t){return isNaN(t.avg)?a.height:a.yScale(t.avg)}).attr("height",function(e){return t.isEmptyDataPoint(e)?0:a.yScale(e.min)-a.yScale(e.avg)}).attr("width",function(e,n){return t.calcBarWidthAdjusted(n,a.chartData.length)}).attr("opacity",.9).on("mouseover",function(t,e){a.tip.show(t,e)}).on("mouseout",function(){a.tip.hide()})}function i(e){e.attr("class","histogramTopStem").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("x1",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("x2",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("y1",function(t){return a.yScale(t.max)}).attr("y2",function(t){return a.yScale(t.avg)}).attr("stroke",function(t){return"red"}).attr("stroke-opacity",function(t){return.6})}function o(e){e.filter(function(a){return!t.isEmptyDataPoint(a)}).attr("class","histogramBottomStem").attr("x1",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("x2",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("y1",function(t){return a.yScale(t.avg)}).attr("y2",function(t){return a.yScale(t.min)}).attr("stroke",function(t){return"red"}).attr("stroke-opacity",function(t){return.6})}function s(e){e.filter(function(a){return!t.isEmptyDataPoint(a)}).attr("class","histogramTopCross").attr("x1",function(e){return t.xMidPointStartPosition(e,a.timeScale)-3}).attr("x2",function(e){return t.xMidPointStartPosition(e,a.timeScale)+3}).attr("y1",function(t){return a.yScale(t.max)}).attr("y2",function(t){return a.yScale(t.max)}).attr("stroke",function(t){return"red"}).attr("stroke-width",function(t){
return"0.5"}).attr("stroke-opacity",function(t){return.6})}function c(e){e.filter(function(a){return!t.isEmptyDataPoint(a)}).attr("class","histogramBottomCross").attr("x1",function(e){return t.xMidPointStartPosition(e,a.timeScale)-3}).attr("x2",function(e){return t.xMidPointStartPosition(e,a.timeScale)+3}).attr("y1",function(t){return a.yScale(t.min)}).attr("y2",function(t){return a.yScale(t.min)}).attr("stroke",function(t){return"red"}).attr("stroke-width",function(t){return"0.5"}).attr("stroke-opacity",function(t){return.6})}function l(t,e,l){if(l){var u=t.selectAll("rect.high, rect.singleValue").data(e);u.call(n),u.enter().append("rect").call(n),u.exit().remove();var m=t.selectAll("rect.low").data(a.chartData);m.call(r),m.enter().append("rect").call(r),m.exit().remove()}else{var d=t.selectAll(".histogramTopStem").data(a.chartData);d.call(i),d.enter().append("line").call(i),d.exit().remove();var f=t.selectAll(".histogramBottomStem").data(a.chartData);f.call(o),f.enter().append("line").call(o),f.exit().remove();var h=t.selectAll(".histogramTopCross").data(a.chartData);h.call(s),h.enter().append("line").call(s),h.exit().remove();var p=t.selectAll(".histogramBottomCross").data(a.chartData);p.call(c),p.enter().append("line").call(c),p.exit().remove()}}var u=a.stacked?"leaderBar":"histogram",m=a.svg.selectAll("rect."+u).data(a.chartData);m.call(e),m.enter().append("rect").call(e),m.exit().remove(),a.hideHighLowValues?a.svg.selectAll(".histogramTopStem, .histogramBottomStem, .histogramTopCross, .histogramBottomCross").remove():l(a.svg,a.chartData,a.stacked)}t.BAR_OFFSET=2,t.createHistogramChart=a}(Charts||(Charts={}));var Charts;!function(t){"use strict";function a(a){var e=d3.svg.line().interpolate(a.interpolation).defined(function(a){return!t.isEmptyDataPoint(a)}).x(function(t){return a.timeScale(t.timestamp)}).y(function(e){return t.isRawMetric(e)?a.yScale(e.value):a.yScale(e.avg)}),n=a.svg.selectAll("path.metricLine").data([a.chartData]);n.attr("class","metricLine").transition().attr("d",e),n.enter().append("path").attr("class","metricLine").transition().attr("d",e),n.exit().remove()}t.createLineChart=a}(Charts||(Charts={}));var Charts;!function(t){"use strict";function a(a){if(a.hideHighLowValues)a.svg.selectAll(".highDot, .lowDot").remove();else{var e=a.svg.selectAll(".highDot").data(a.chartData);e.attr("class","highDot").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("r",3).attr("cx",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("cy",function(e){return t.isRawMetric(e)?a.yScale(e.value):a.yScale(e.max)}).style("fill",function(){return"#ff1a13"}).on("mouseover",function(t,a){}).on("mouseout",function(){}),e.enter().append("circle").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("class","highDot").attr("r",3).attr("cx",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("cy",function(e){return t.isRawMetric(e)?a.yScale(e.value):a.yScale(e.max)}).style("fill",function(){return"#ff1a13"}).on("mouseover",function(t,a){}).on("mouseout",function(){}),e.exit().remove();var n=a.svg.selectAll(".lowDot").data(a.chartData);n.attr("class","lowDot").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("r",3).attr("cx",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("cy",function(e){return t.isRawMetric(e)?a.yScale(e.value):a.yScale(e.min)}).style("fill",function(){return"#70c4e2"}).on("mouseover",function(t,a){}).on("mouseout",function(){}),n.enter().append("circle").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("class","lowDot").attr("r",3).attr("cx",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("cy",function(e){return t.isRawMetric(e)?a.yScale(e.value):a.yScale(e.min)}).style("fill",function(){return"#70c4e2"}).on("mouseover",function(t,a){}).on("mouseout",function(){}),n.exit().remove()}var r=a.svg.selectAll(".avgDot").data(a.chartData);r.attr("class","avgDot").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("r",3).attr("cx",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("cy",function(e){return t.isRawMetric(e)?a.yScale(e.value):a.yScale(e.avg)}).style("fill",function(){return"#FFF"}).on("mouseover",function(t,a){}).on("mouseout",function(){}),r.enter().append("circle").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("class","avgDot").attr("r",3).attr("cx",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("cy",function(e){return t.isRawMetric(e)?a.yScale(e.value):a.yScale(e.avg)}).style("fill",function(){return"#FFF"}).on("mouseover",function(t,a){}).on("mouseout",function(){}),r.exit().remove()}t.createScatterChart=a}(Charts||(Charts={}));var Charts;!function(t){"use strict";function a(a){var e=a.svg.selectAll(".scatterLineTopStem").data(a.chartData);e.attr("class","scatterLineTopStem").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("x1",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("x2",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("y1",function(t){return a.yScale(t.max)}).attr("y2",function(t){return a.yScale(t.avg)}).attr("stroke",function(t){return"#000"}),e.enter().append("line").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("class","scatterLineTopStem").attr("x1",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("x2",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("y1",function(t){return a.yScale(t.max)}).attr("y2",function(t){return a.yScale(t.avg)}).attr("stroke",function(t){return"#000"}),e.exit().remove();var n=a.svg.selectAll(".scatterLineBottomStem").data(a.chartData);n.attr("class","scatterLineBottomStem").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("x1",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("x2",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("y1",function(t){return a.yScale(t.avg)}).attr("y2",function(t){return a.yScale(t.min)}).attr("stroke",function(t){return"#000"}),n.enter().append("line").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("class","scatterLineBottomStem").attr("x1",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("x2",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("y1",function(t){return a.yScale(t.avg)}).attr("y2",function(t){return a.yScale(t.min)}).attr("stroke",function(t){return"#000"}),n.exit().remove();var r=a.svg.selectAll(".scatterLineTopCross").data(a.chartData);r.attr("class","scatterLineTopCross").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("x1",function(e){return t.xMidPointStartPosition(e,a.timeScale)-3}).attr("x2",function(e){return t.xMidPointStartPosition(e,a.timeScale)+3}).attr("y1",function(t){return a.yScale(t.max)}).attr("y2",function(t){return a.yScale(t.max)}).attr("stroke",function(t){return"#000"}).attr("stroke-width",function(t){return"0.5"}),r.enter().append("line").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("class","scatterLineTopCross").attr("x1",function(e){return t.xMidPointStartPosition(e,a.timeScale)-3}).attr("x2",function(e){return t.xMidPointStartPosition(e,a.timeScale)+3}).attr("y1",function(t){return a.yScale(t.max)}).attr("y2",function(t){return a.yScale(t.max)}).attr("stroke",function(t){return"#000"}).attr("stroke-width",function(t){return"0.5"}),r.exit().remove();var i=a.svg.selectAll(".scatterLineBottomCross").data(a.chartData);i.attr("class","scatterLineBottomCross").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("x1",function(e){return t.xMidPointStartPosition(e,a.timeScale)-3}).attr("x2",function(e){return t.xMidPointStartPosition(e,a.timeScale)+3}).attr("y1",function(t){return a.yScale(t.min)}).attr("y2",function(t){return a.yScale(t.min)}).attr("stroke",function(t){return"#000"}).attr("stroke-width",function(t){return"0.5"}),i.enter().append("line").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("class","scatterLineBottomCross").attr("x1",function(e){return t.xMidPointStartPosition(e,a.timeScale)-3}).attr("x2",function(e){return t.xMidPointStartPosition(e,a.timeScale)+3}).attr("y1",function(t){return a.yScale(t.min)}).attr("y2",function(t){return a.yScale(t.min)}).attr("stroke",function(t){return"#000"}).attr("stroke-width",function(t){return"0.5"}),i.exit().remove();var o=a.svg.selectAll(".scatterDot").data(a.chartData);o.attr("class","scatterDot").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("r",3).attr("cx",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("cy",function(e){return t.isRawMetric(e)?a.yScale(e.value):a.yScale(e.avg)}).style("fill",function(){return"#70c4e2"}).style("opacity",function(){return"1"}).on("mouseover",function(t,a){}).on("mouseout",function(){}),o.enter().append("circle").filter(function(a){return!t.isEmptyDataPoint(a)}).attr("class","scatterDot").attr("r",3).attr("cx",function(e){return t.xMidPointStartPosition(e,a.timeScale)}).attr("cy",function(e){return t.isRawMetric(e)?a.yScale(e.value):a.yScale(e.avg)}).style("fill",function(){return"#70c4e2"}).style("opacity",function(){return"1"}).on("mouseover",function(t,a){}).on("mouseout",function(){}),o.exit().remove()}t.createScatterLineChart=a}(Charts||(Charts={}));